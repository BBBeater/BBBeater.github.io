<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Anniversary - ‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡πÄ‡∏£‡∏≤</title>
<style>
  /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å --- */
  body {
    font-family: 'Sarabun', sans-serif;
    background: linear-gradient(135deg, #ffd6e8 0%, #fff7d1 100%);
    color: #5c3a3a;
    margin: 0; padding: 0;
  }
  h1,h2,h3 {
    font-weight: 700;
    color: #d43f6f;
    text-align: center;
    margin-bottom: 15px;
  }
  .hidden {display: none;}
  .container {
    max-width: 600px;
    margin: auto;
    padding: 15px;
  }
  button {
    background: #f48fb1;
    border: none;
    padding: 10px 20px;
    border-radius: 25px;
    font-size: 1rem;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(212, 63, 111, 0.5);
    transition: background 0.3s ease;
  }
  button:hover {
    background: #d43f6f;
  }
  input[type=number], input[type=text], select {
    padding: 8px 12px;
    font-size: 1rem;
    border: 2px solid #d43f6f;
    border-radius: 15px;
    width: 100%;
    max-width: 180px;
    margin-bottom: 10px;
  }
  /* --- ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏° --- */
  .menu-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(130px,1fr));
    gap: 15px;
    margin: 20px 0;
  }
  .menu-card {
    background: #ffd6e8;
    border-radius: 20px;
    padding: 10px;
    box-shadow: 0 3px 8px rgba(212, 63, 111, 0.3);
    text-align: center;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s ease;
  }
  .menu-card:hover {
    background: #ffabc1;
  }
  .menu-card img {
    width: 80px;
    border-radius: 15px;
    margin-bottom: 8px;
  }
  .menu-card .title {
    font-weight: 700;
    color: #d43f6f;
  }
  /* --- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö --- */
  .back-game-menu-btn {
    background: #d43f6f;
    margin-bottom: 10px;
  }
  /* --- ‡πÑ‡∏û‡πà‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à --- */
  #cardsContainer div:hover {
    filter: brightness(0.85);
  }
</style>
</head>
<body>

<div class="container">

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 1: ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô -->
<div id="page1">
  <h1>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h1>
  <input id="passwordInput" type="text" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" />
  <button onclick="checkPassword()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</button>
  <p id="passwordMessage" style="color:red; text-align:center; margin-top:10px;"></p>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 2: ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢ -->
<div id="page2" class="hidden">
  <h1>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏ô‡∏∞‡∏∞~ üíñ</h1>
  <img src="https://i.pinimg.com/originals/11/4e/c2/114ec22020a25f63eae8d9aa5a4b9c1e.jpg" alt="Anniversary" style="max-width:100%; border-radius:15px;" />
  <button onclick="showPage('page3')">‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡πÄ‡∏•‡∏¢</button>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 3: ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏£‡∏π‡∏õ -->
<div id="page3" class="hidden">
  <h2>‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏°‡∏ß‡∏î‡∏†‡∏≤‡∏û üì∏</h2>
  <div class="menu-grid" id="mainCategoryMenu">
    <div class="menu-card" id="best" onclick="tryOpenCategory('best')">
      <img src="https://via.placeholder.com/150/f48fb1/fff?text=Best" alt="The Best" />
      <div class="title">‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
      <div class="lock-status" id="bestLock">üîí</div>
    </div>
    <div class="menu-card" id="funny" onclick="tryOpenCategory('funny')">
      <img src="https://via.placeholder.com/150/f48fb1/fff?text=Funny" alt="Funny" />
      <div class="title">‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏Æ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
      <div class="lock-status" id="funnyLock">üîí</div>
    </div>
    <div class="menu-card" id="secret" onclick="tryOpenCategory('secret')">
      <img src="https://via.placeholder.com/150/f48fb1/fff?text=Secret" alt="Secret" />
      <div class="title">‡∏£‡∏π‡∏õ‡πÅ‡∏≠‡∏ö‡∏ñ‡πà‡∏≤‡∏¢</div>
      <div class="lock-status" id="secretLock">üîí</div>
    </div>
    <div class="menu-card" id="love" onclick="tryOpenCategory('love')">
      <img src="https://via.placeholder.com/150/f48fb1/fff?text=Love" alt="Love" />
      <div class="title">‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ä‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà</div>
      <div class="lock-status" id="loveLock">üîí</div>
    </div>
  </div>
  <button onclick="showPage('page7')">üéÆ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î</button>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 4-7: ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏π‡∏õ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î (‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡πÄ‡∏â‡∏¢‡πÜ) -->
<div id="categoryContent" class="hidden">
  <button onclick="showPage('page3')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏°‡∏ß‡∏î‡∏£‡∏π‡∏õ</button>
  <h2 id="categoryTitle"></h2>
  <div id="categoryImages" style="display:flex; flex-wrap:wrap; gap:10px; justify-content:center;">
    <!-- ‡∏£‡∏π‡∏õ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
  </div>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 7: ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏° -->
<div id="page7" class="hidden">
  <h2>üéÆ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î! üéÆ</h2>
  <div class="menu-grid" id="gameMenuGrid">
    <div class="menu-card" data-game="game1" onclick="startGame('game1')">
      <img src="https://via.placeholder.com/80/f48fb1/fff?text=‡πÄ‡∏Å‡∏°1" alt="‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç" />
      <div class="title">‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç</div>
    </div>
    <div class="menu-card" data-game="game2" onclick="startGame('game2')">
      <img src="https://via.placeholder.com/80/f48fb1/fff?text=‡πÄ‡∏Å‡∏°2" alt="‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à" />
      <div class="title">‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à</div>
    </div>
    <div class="menu-card" data-game="game3" onclick="startGame('game3')">
      <img src="https://via.placeholder.com/80/f48fb1/fff?text=‡πÄ‡∏Å‡∏°3" alt="‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏ä‡∏≤" />
      <div class="title">‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏ä‡∏≤</div>
    </div>
    <div class="menu-card" data-game="game4" onclick="startGame('game4')">
      <img src="https://via.placeholder.com/80/f48fb1/fff?text=‡πÄ‡∏Å‡∏°4" alt="‡πÄ‡∏Å‡∏°‡∏ä‡∏π‡πâ‡∏ï‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á" />
      <div class="title">‡πÄ‡∏Å‡∏°‡∏ä‡∏π‡πâ‡∏ï‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á</div>
    </div>
  </div>
  <div style="text-align:center; margin-top: 15px;">
    <button onclick="showPage('page3')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏°‡∏ß‡∏î‡∏£‡∏π‡∏õ</button>
  </div>
</div>

<!-- ‡πÄ‡∏Å‡∏° 1: ‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç -->
<div id="game1" class="hidden">
  <button class="back-game-menu-btn" onclick="showPage('page7')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button>
  <h2>‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç 1-100</h2>
  <p>‡∏•‡∏≠‡∏á‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡πÉ‡∏à ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏ó‡∏≤‡∏¢! ‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏™‡∏π‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</p>
  <input type="number" id="guessInput" min="1" max="100" placeholder="‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà" />
  <button id="guessBtn" onclick="checkGuess()">‡∏ó‡∏≤‡∏¢!</button>
  <div id="gameMessage"></div>
</div>

<!-- ‡πÄ‡∏Å‡∏° 2: ‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à -->
<div id="game2" class="hidden">
  <button class="back-game-menu-btn" onclick="showPage('page7')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button>
  <h2>‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à</h2>
  <p>‡∏à‡∏≥‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏û‡πà‡∏à‡∏∞‡∏™‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏≠‡∏¢‡∏π‡πà</p>
  <div id="cardsContainer" style="display:flex; justify-content:center; gap:15px; margin-bottom:20px;"></div>
  <button id="startShuffleBtn" onclick="startShuffleGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà</button>
  <div id="heartGameMessage" style="margin-top:15px; font-weight:bold; color:#d43f6f;"></div>
</div>

<!-- ‡πÄ‡∏Å‡∏° 3: ‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏ä‡∏≤ -->
<div id="game3" class="hidden">
  <button class="back-game-menu-btn" onclick="showPage('page7')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button>
  <h2>‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏ä‡∏≤</h2>
  <p>‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏à‡∏≠ ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏£‡∏∞‡∏î‡∏±‡∏ö 5 ‡∏î‡∏≤‡∏ß! (‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ)</p>
  <div style="margin-bottom: 15px;">
    <label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á 5 ‡∏î‡∏≤‡∏ß: </label>
    <select id="rarityDifficulty">
      <option value="0.1">‡∏¢‡∏≤‡∏Å‡∏°‡∏≤‡∏Å (10%)</option>
      <option value="0.2" selected>‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (20%)</option>
      <option value="0.3">‡∏á‡πà‡∏≤‡∏¢ (30%)</option>
    </select>
  </div>
  <button id="gachaBtn" onclick="pullGacha()">‡∏™‡∏∏‡πà‡∏°!</button>
  <div id="gachaResult" style="margin-top:20px; font-weight:bold; color:#d43f6f;"></div>
</div>

<!-- ‡πÄ‡∏Å‡∏° 4: ‡πÄ‡∏Å‡∏°‡∏ä‡∏π‡πâ‡∏ï‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á -->
<div id="game4" class="hidden">
  <button class="back-game-menu-btn" onclick="showPage('page7')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button>
  <h2>‡πÄ‡∏Å‡∏°‡∏ä‡∏π‡πâ‡∏ï‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á</h2>
  <p>‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á 9 ‡∏£‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏ô‡∏∞!</p>
  <button id="shootBtn" onclick="shootHeart()">‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à</button>
  <div id="shootResult" style="margin-top:20px; font-weight:bold; color:#d43f6f;"></div>
  <div>‡∏¢‡∏¥‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à <span id="shootSuccessCount">0</span> / 9 ‡∏£‡∏≠‡∏ö</div>
</div>

</div>

<script>
/* --- ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡πâ‡∏≤ --- */
function showPage(id) {
  // ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤
  document.querySelectorAll('.container > div').forEach(div => {
    div.classList.add('hidden');
  });
  // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
  const target = document.getElementById(id);
  if(target) target.classList.remove('hidden');

  // ‡∏ñ‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡∏° ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
  if (id.startsWith('game')) {
    initGame(id);
  }
}

/* --- ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô --- */
const PASSWORD = "0000";
function checkPassword() {
  const input = document.getElementById('passwordInput').value.trim();
  const msg = document.getElementById('passwordMessage');
  if(input === PASSWORD) {
    msg.textContent = "";
    showPage('page2');
  } else {
    msg.textContent = "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞";
  }
}

/* --- ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î‡∏£‡∏π‡∏õ --- */
let unlockedCategories = JSON.parse(localStorage.getItem('unlockedCategories') || '{}');

function saveUnlocks() {
  localStorage.setItem('unlockedCategories', JSON.stringify(unlockedCategories));
}

function unlockCategory(cat) {
  if(!unlockedCategories[cat]) {
    unlockedCategories[cat] = true;
    saveUnlocks();
    updateLockUI();
  }
}

function updateLockUI() {
  ['best','funny','secret','love'].forEach(cat=>{
    const card = document.getElementById(cat);
    const lockStatus = document.getElementById(cat+'Lock');
    if(unlockedCategories[cat]) {
      lockStatus.textContent = "üîì";
      card.style.opacity = "1";
      card.style.pointerEvents = "auto";
    } else {
      lockStatus.textContent = "üîí";
      card.style.opacity = "0.5";
      card.style.pointerEvents = "none";
    }
  });
}

/* --- ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏£‡∏π‡∏õ --- */
const categoryImagesData = {
  best: [
    'https://i.pinimg.com/564x/b6/cd/8a/b6cd8a5bb4f68e9a1f914b2df7d4eabf.jpg',
    'https://i.pinimg.com/564x/0a/7f/1b/0a7f1b1b86dd5eb30a87d1ca3e6d306d.jpg',
    'https://i.pinimg.com/564x/fd/31/b3/fd31b3449398e126218de2f8bde6cecb.jpg'
  ],
  funny: [
    'https://i.pinimg.com/564x/3b/0f/0c/3b0f0c083dceee524fd010c3ca38ca42.jpg',
    'https://i.pinimg.com/564x/42/c4/c0/42c4c0c52970c136022ba21b2d6d8426.jpg',
    'https://i.pinimg.com/564x/4a/f1/58/4af158db02a6bb5242889871dbf432e6.jpg'
  ],
  secret: [
    'https://i.pinimg.com/564x/c1/72/d6/c172d6aa83dfbf06f9b02f112bc159cc.jpg',
    'https://i.pinimg.com/564x/15/52/10/155210382ee4140d925efc85b0ef6c7e.jpg',
    'https://i.pinimg.com/564x/d0/f0/7f/d0f07ff56a75e72ec6c480a61d4034d3.jpg'
  ],
  love: [
    'https://i.pinimg.com/564x/ed/5a/0e/ed5a0e0515754af1d42df3d398a512af.jpg',
    'https://i.pinimg.com/564x/98/f1/ed/98f1ed9300a87d248b28b18c988a4761.jpg',
    'https://i.pinimg.com/564x/10/ae/c7/10aec7a54c8c6b571e7db98c34a77f03.jpg'
  ]
};

function tryOpenCategory(cat) {
  if(unlockedCategories[cat]) {
    openCategory(cat);
  } else {
    alert("‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö");
  }
}

function openCategory(cat) {
  showPage('categoryContent');
  const titleMap = {
    best: "‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô",
    funny: "‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏Æ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î",
    secret: "‡∏£‡∏π‡∏õ‡πÅ‡∏≠‡∏ö‡∏ñ‡πà‡∏≤‡∏¢",
    love: "‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ä‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà"
  };
  document.getElementById('categoryTitle').textContent = titleMap[cat];
  const container = document.getElementById('categoryImages');
  container.innerHTML = "";
  categoryImagesData[cat].forEach(src=>{
    const img = document.createElement('img');
    img.src = src;
    img.style.width = "180px";
    img.style.borderRadius = "15px";
    img.style.boxShadow = "0 3px 6px rgba(212,63,111,0.4)";
    container.appendChild(img);
  });
}

/* --- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏°‡∏ô‡∏π --- */
function startGame(gameId) {
  showPage(gameId);
  initGame(gameId);
}

/* --- ‡πÄ‡∏Å‡∏° 1: ‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç --- */
let secretNumberGame1;

function initGame(gameId) {
  if(gameId === "game1") {
    secretNumberGame1 = Math.floor(Math.random()*100) + 1;
    document.getElementById('gameMessage').textContent = "";
    document.getElementById('guessInput').value = "";
  }
  else if(gameId === "game2") {
    initShuffleGame();
  }
  else if(gameId === "game3") {
    initGachaGame();
  }
  else if(gameId === "game4") {
    initShootGame();
  }
}

function checkGuess() {
  const guessInput = document.getElementById('guessInput');
  const guess = parseInt(guessInput.value);
  const message = document.getElementById('gameMessage');
  if(isNaN(guess) || guess < 1 || guess > 100) {
    message.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç 1-100 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ô‡∏∞";
    return;
  }
  if(guess === secretNumberGame1) {
    message.textContent = "üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß!";
    unlockCategory('best');
  }
  else if(guess < secretNumberGame1) {
    message.textContent = "‡πÄ‡∏•‡∏Ç‡∏ô‡πâ‡∏≠‡∏¢‡πÑ‡∏õ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà!";
  }
  else {
    message.textContent = "‡πÄ‡∏•‡∏Ç‡∏°‡∏≤‡∏Å‡πÑ‡∏õ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà!";
  }
}

/* --- ‡πÄ‡∏Å‡∏° 2: ‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à --- */
let cards = [];
let heartIndex = 0;
let isShuffling = false;

function initShuffleGame() {
  cards = ["‚ô†Ô∏è", "‚ô¶Ô∏è", "‚ô£Ô∏è", "‚ô•Ô∏è", "‚ô†Ô∏è"];
  heartIndex = 3; // ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà index 3
  isShuffling = false;
  document.getElementById('heartGameMessage').textContent = "";
  renderCards(true);
  document.getElementById('startShuffleBtn').disabled = true;
}

function renderCards(showAll) {
  const container = document.getElementById('cardsContainer');
  container.innerHTML = "";
  cards.forEach((card,i)=>{
    const div = document.createElement('div');
    div.textContent = showAll ? card : "üÇ†";
    div.style.fontSize = "3rem";
    div.style.width = "60px";
    div.style.height = "90px";
    div.style.textAlign = "center";
    div.style.lineHeight = "90px";
    div.style.border = "2px solid #d43f6f";
    div.style.borderRadius = "10px";
    div.style.cursor = isShuffling ? "default" : "pointer";
    div.dataset.index = i;
    if(!isShuffling) {
      div.addEventListener('click', ()=>chooseCard(i));
    }
    container.appendChild(div);
  });
}

function shuffleCards() {
  for(let i=0; i<10; i++) {
    let a = Math.floor(Math.random()*cards.length);
    let b = Math.floor(Math.random()*cards.length);
    [cards[a], cards[b]] = [cards[b], cards[a]];
    if(a === heartIndex) heartIndex = b;
    else if(b === heartIndex) heartIndex = a;
  }
}

function startShuffleGame() {
  if(isShuffling) return;
  isShuffling = true;
  document.getElementById('heartGameMessage').textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏û‡πà...";
  document.getElementById('startShuffleBtn').disabled = true;

  setTimeout(()=>{
    shuffleCards();
    renderCards(false);
    document.getElementById('heartGameMessage').textContent = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏û‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à!";
    isShuffling = false;
  }, 1500);
}

function chooseCard(index) {
  if(isShuffling) return;
  if(index === heartIndex) {
    document.getElementById('heartGameMessage').textContent = "üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏Æ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏•‡πâ‡∏ß!";
    unlockCategory('funny');
  } else {
    document.getElementById('heartGameMessage').textContent = "‡∏ú‡∏¥‡∏î! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÇ‡∏î‡∏¢‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà";
    document.getElementById('startShuffleBtn').disabled = false;
  }
}

/* --- ‡πÄ‡∏Å‡∏° 3: ‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏ä‡∏≤ --- */
let gachaRarityChance = 0.2;
let hasFiveStar = false;

function initGachaGame() {
  document.getElementById('gachaResult').textContent = "";
  hasFiveStar = false;
  document.getElementById('rarityDifficulty').value = "0.2";
}

document.getElementById('rarityDifficulty').addEventListener('change', e=>{
  gachaRarityChance = parseFloat(e.target.value);
  initGachaGame();
});

function pullGacha() {
  if(hasFiveStar) {
    document.getElementById('gachaResult').textContent = "üéâ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ 5 ‡∏î‡∏≤‡∏ß‡πÅ‡∏•‡πâ‡∏ß! ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ä‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà!";
    return;
  }
  const rand = Math.random();
  let star = 1;
  if(rand < gachaRarityChance) star = 5;
  else if(rand < 0.6) star = 4;
  else if(rand < 0.75) star = 3;
  else if(rand < 0.9) star = 2;
  else star = 1;

  document.getElementById('gachaResult').textContent = `‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏£‡∏∞‡∏î‡∏±‡∏ö ${star} ‡∏î‡∏≤‡∏ß ‚≠ê${"‚≠ê".repeat(star-1)}`;

  if(star === 5 && !hasFiveStar) {
    hasFiveStar = true;
    unlockCategory('love');
  }
}

/* --- ‡πÄ‡∏Å‡∏° 4: ‡πÄ‡∏Å‡∏°‡∏ä‡∏π‡πâ‡∏ï‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á --- */
let shootSuccessCount = 0;

function initShootGame() {
  shootSuccessCount = 0;
  document.getElementById('shootSuccessCount').textContent = shootSuccessCount;
  document.getElementById('shootResult').textContent = "";
  document.getElementById('shootBtn').disabled = false;
}

function shootHeart() {
  const hit = Math.random() < 0.6;
  if(hit) {
    shootSuccessCount++;
    document.getElementById('shootSuccessCount').textContent = shootSuccessCount;
    document.getElementById('shootResult').textContent = "‡∏¢‡∏¥‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! üíò";
    if(shootSuccessCount >= 9) {
      document.getElementById('shootResult').textContent = "üéâ ‡∏ä‡∏ô‡∏∞‡πÄ‡∏Å‡∏°! ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ‡∏£‡∏π‡∏õ‡πÅ‡∏≠‡∏ö‡∏ñ‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß!";
      unlockCategory('secret');
      document.getElementById('shootBtn').disabled = true;
    }
  } else {
    document.getElementById('shootResult').textContent = "‡∏û‡∏•‡∏≤‡∏î! ‡∏•‡∏≠‡∏á‡∏¢‡∏¥‡∏á‡πÉ‡∏´‡∏°‡πà";
  }
}

/* --- ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á UI --- */
window.onload = () => {
  updateLockUI();
  showPage('page1');
};
</script>

</body>
</html>
