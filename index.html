<!DOCTYPE html> 
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Anniversary - ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏¢‡∏Å + ‡πÄ‡∏Å‡∏°</title>
<link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet" />
<style>
  /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö (‡πÄ‡∏õ‡πä‡∏∞ ‡πÜ) --- */
  body {
    font-family: 'Itim', cursive;
    background: linear-gradient(135deg, #ffd6e8, #fff0f5);
    color: #5e2b45;
    margin: 0; padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  .container {
    width: 95vw;
    max-width: 600px;
    background: white;
    border-radius: 25px;
    box-shadow: 0 0 25px #ffb6c1;
    padding: 35px 25px 40px;
    text-align: center;
    box-sizing: border-box;
    position: relative;
  }
  h1, h2 {
    color: #d43f6f;
    margin-bottom: 15px;
  }
  p {
    font-size: 1.2rem;
    margin-bottom: 30px;
    line-height: 1.4;
  }
  input[type="password"], input[type="number"] {
    font-family: 'Itim', cursive;
    font-size: 20px;
    padding: 10px 14px;
    width: 130px;
    border: 2px solid #ffb6c1;
    border-radius: 12px;
    text-align: center;
    margin-bottom: 15px;
  }
  button {
    background-color: #f48fb1;
    border: none;
    color: white;
    font-size: 18px;
    padding: 12px 28px;
    border-radius: 20px;
    cursor: pointer;
    margin: 0 10px;
    transition: background-color 0.3s ease;
    box-shadow: 0 4px 10px rgba(244,143,177,0.5);
  }
  button:hover {
    background-color: #d43f6f;
  }
  .buttons {
    display: flex;
    justify-content: center;
    margin-top: 25px;
    gap: 15px;
  }
  .hidden {
    display: none;
  }
  /* Game specific styling */
  #heartCards {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-bottom: 15px;
  }
  .card {
    width: 60px;
    height: 80px;
    background-color: #fff0f8;
    border: 2px solid #ff8ab8;
    border-radius: 12px;
    box-shadow: 0 0 8px #ffb6c1;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 32px;
    user-select: none;
    transition: transform 0.3s ease;
  }
  .card.moving {
    animation: shuffleMove 0.6s ease forwards;
  }
  @keyframes shuffleMove {
    0% { transform: translate(0, 0) rotate(0deg);}
    50% { transform: translate(20px, -20px) rotate(15deg);}
    100% { transform: translate(0, 0) rotate(0deg);}
  }
  #gachaResult {
    font-size: 48px;
    margin: 15px 0;
    user-select: none;
  }
  #gachaStar {
    font-size: 36px;
    color: gold;
    user-select: none;
  }
  #shootGameArea {
    margin-top: 20px;
  }
  #shootGameArea button {
    margin-top: 15px;
  }
  #heartTarget {
    width: 100px;
    height: 100px;
    margin: 0 auto 10px;
    background: #ffe0eb;
    border-radius: 50%;
    border: 3px solid #d43f6f;
    position: relative;
  }
  #heartTarget::before {
    content: '';
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 70px; height: 70px;
    border: 2px solid #d43f6f;
    border-radius: 50%;
  }
  #heartShotCount {
    font-weight: bold;
    color: #d43f6f;
  }
</style>
</head>
<body>
<div class="container">

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ 7: ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ -->
  <div id="page7" class="hidden">
    <h2>üéÆ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î! üéÆ</h2>
    <div class="menu-grid" id="gameMenuGrid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; justify-items: center;">
      <div class="menu-card" data-game="game1" style="cursor:pointer; background:#fff0f8; border-radius:20px; box-shadow: 0 0 12px #ffb6c1; padding:15px;">
        <div class="title" style="color:#d43f6f; font-weight:bold; font-size:1.3rem;">‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç</div>
      </div>
      <div class="menu-card" data-game="game2" style="cursor:pointer; background:#fff0f8; border-radius:20px; box-shadow: 0 0 12px #ffb6c1; padding:15px;">
        <div class="title" style="color:#d43f6f; font-weight:bold; font-size:1.3rem;">‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à</div>
      </div>
      <div class="menu-card" data-game="game3" style="cursor:pointer; background:#fff0f8; border-radius:20px; box-shadow: 0 0 12px #ffb6c1; padding:15px;">
        <div class="title" style="color:#d43f6f; font-weight:bold; font-size:1.3rem;">‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏ä‡∏≤</div>
      </div>
      <div class="menu-card" data-game="game4" style="cursor:pointer; background:#fff0f8; border-radius:20px; box-shadow: 0 0 12px #ffb6c1; padding:15px;">
        <div class="title" style="color:#d43f6f; font-weight:bold; font-size:1.3rem;">‡πÄ‡∏Å‡∏°‡∏ä‡∏π‡πâ‡∏ï‡∏´‡∏±‡∏ß‡πÉ‡∏à</div>
      </div>
    </div>
    <div class="buttons">
      <button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
    </div>
  </div>

  <!-- ‡πÄ‡∏Å‡∏°1: ‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç -->
  <div id="game1" class="hidden">
    <button class="back-game-menu-btn" onclick="showPage('page7')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button>
    <h2>‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç 1-100</h2>
    <p>‡∏•‡∏≠‡∏á‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡πÉ‡∏à ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏ó‡∏≤‡∏¢! ‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏™‡∏π‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</p>
    <input type="number" id="guessInput" min="1" max="100" placeholder="‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà" />
    <button id="guessBtn" onclick="checkGuess()">‡∏ó‡∏≤‡∏¢!</button>
    <div id="gameMessage"></div>
  </div>

  <!-- ‡πÄ‡∏Å‡∏°2: ‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à -->
  <div id="game2" class="hidden">
    <button class="back-game-menu-btn" onclick="showPage('page7')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button>
    <h2>‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à</h2>
    <p>‡∏à‡∏≥‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏î‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏û‡πà‡∏à‡∏∞‡∏™‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‡∏£‡∏π‡πâ‡∏°‡∏±‡πâ‡∏¢‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô?</p>
    <div id="heartCards"></div>
    <button id="startShuffleBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏û‡πà</button>
    <div id="heartMessage" style="margin-top: 12px; color:#d43f6f; font-weight:bold;"></div>
  </div>

  <!-- ‡πÄ‡∏Å‡∏°3: ‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏ä‡∏≤ -->
  <div id="game3" class="hidden">
    <button class="back-game-menu-btn" onclick="showPage('page7')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button>
    <h2>‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏ä‡∏≤</h2>
    <p>‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏£‡∏∞‡∏î‡∏±‡∏ö 1-5 ‡∏î‡∏≤‡∏ß (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ô‡πâ‡∏≠‡∏¢‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏¢‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô)</p>
    <label>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å (0-100): </label>
    <input type="number" id="gachaDifficulty" min="0" max="100" value="30" style="width:80px; text-align:center;" />
    <br />
    <button id="gachaBtn">‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏≤‡∏ä‡∏≤</button>
    <div id="gachaResult"></div>
    <div id="gachaStar"></div>
  </div>

  <!-- ‡πÄ‡∏Å‡∏°4: ‡πÄ‡∏Å‡∏°‡∏ä‡∏π‡πâ‡∏ï‡∏´‡∏±‡∏ß‡πÉ‡∏à -->
  <div id="game4" class="hidden">
    <button class="back-game-menu-btn" onclick="showPage('page7')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button>
    <h2>‡πÄ‡∏Å‡∏°‡∏ä‡∏π‡πâ‡∏ï‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á</h2>
    <p>‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 9 ‡∏£‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏ô‡∏∞!</p>
    <div id="heartTarget"></div>
    <button id="shootBtn">‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à!</button>
    <div id="heartShotCount">‡∏¢‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß 0 / 9 ‡∏£‡∏≠‡∏ö</div>
    <div id="shootMessage" style="margin-top: 10px; color:#d43f6f; font-weight:bold;"></div>
  </div>

</div>

<script>
  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ)
  function showPage(pageId) {
    const pages = document.querySelectorAll('.container > div');
    pages.forEach(p => p.classList.add('hidden'));
    document.getElementById(pageId).classList.remove('hidden');
  }

  // --- ‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç ---
  let secretNumber;
  function initGame(gameId) {
    if (gameId === "game1") {
      secretNumber = Math.floor(Math.random() * 100) + 1;
      document.getElementById('gameMessage').textContent = "";
      document.getElementById('guessInput').value = "";
    } else if (gameId === "game2") {
      initHeartCardGame();
    } else if (gameId === "game3") {
      initGachaGame();
    } else if (gameId === "game4") {
      initShootHeartGame();
    }
  }

  function checkGuess() {
    const guessInput = document.getElementById('guessInput');
    const guess = parseInt(guessInput.value);
    const message = document.getElementById('gameMessage');
    if (isNaN(guess) || guess < 1 || guess > 100) {
      message.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç 1-100 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ô‡∏∞";
      return;
    }
    if (guess === secretNumber) {
      message.textContent = "üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î The Best ‡πÅ‡∏•‡πâ‡∏ß!";
      unlockCategory('best');
    } else if (guess < secretNumber) {
      message.textContent = "‡πÄ‡∏•‡∏Ç‡∏ô‡πâ‡∏≠‡∏¢‡πÑ‡∏õ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà!";
    } else {
      message.textContent = "‡πÄ‡∏•‡∏Ç‡∏°‡∏≤‡∏Å‡πÑ‡∏õ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà!";
    }
  }

  // --- ‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à ---
  const heartCardsContainer = document.getElementById('heartCards');
  const heartMessage = document.getElementById('heartMessage');
  const startShuffleBtn = document.getElementById('startShuffleBtn');
  let cards = [];
  let heartPosition; // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à ‡∏´‡∏•‡∏±‡∏á‡∏™‡∏•‡∏±‡∏ö
  let isShuffling = false;

  function initHeartCardGame() {
    heartMessage.textContent = "";
    cards = ['‚ô†Ô∏è', '‚ô•Ô∏è', '‚ô£Ô∏è', '‚ô¶Ô∏è', '‚òÖ'];
    heartPosition = 1; // ‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á 1 ‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å (‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å 0)
    renderCards(cards);
    startShuffleBtn.disabled = false;
  }

  function renderCards(arr) {
    heartCardsContainer.innerHTML = "";
    arr.forEach((symbol, i) => {
      const div = document.createElement('div');
      div.className = 'card';
      div.textContent = symbol;
      div.dataset.index = i;
      div.addEventListener('click', () => selectCard(i));
      heartCardsContainer.appendChild(div);
    });
  }

  function startShuffle() {
    if (isShuffling) return;
    isShuffling = true;
    heartMessage.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏û‡πà...";
    startShuffleBtn.disabled = true;

    // ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏û‡πà 7 ‡∏£‡∏≠‡∏ö ‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
    let shuffleCount = 0;
    let shuffleInterval = setInterval(() => {
      shuffleCards();
      shuffleCount++;
      if (shuffleCount >= 7) {
        clearInterval(shuffleInterval);
        isShuffling = false;
        heartMessage.textContent = "‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏•‡∏±‡∏ö!";
        startShuffleBtn.textContent = "‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà";
        startShuffleBtn.disabled = false;
      }
    }, 400);
  }

  function shuffleCards() {
    // ‡∏™‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î 2 ‡πÉ‡∏ö‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°
    let i = Math.floor(Math.random() * cards.length);
    let j = Math.floor(Math.random() * cards.length);
    while (j === i) j = Math.floor(Math.random() * cards.length);

    [cards[i], cards[j]] = [cards[j], cards[i]];

    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à
    heartPosition = cards.indexOf('‚ô•Ô∏è');
    renderCards(cards);
  }

  function selectCard(index) {
    if (isShuffling) return;
    if (index === heartPosition) {
      heartMessage.textContent = "üéâ ‡πÄ‡∏à‡∏≠‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏Æ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏•‡πâ‡∏ß!";
      unlockCategory('funny');
    } else {
      heartMessage.textContent = "‡∏ú‡∏¥‡∏î! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡πÇ‡∏î‡∏¢‡∏Å‡∏î ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á";
    }
  }

  startShuffleBtn.addEventListener('click', () => {
    if (isShuffling) return;
    if (startShuffleBtn.textContent === "‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà") {
      initHeartCardGame();
      startShuffleBtn.textContent = "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏û‡πà";
      heartMessage.textContent = "";
    } else {
      startShuffle();
    }
  });

  // --- ‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏ä‡∏≤ ---
  const gachaBtn = document.getElementById('gachaBtn');
  const gachaResult = document.getElementById('gachaResult');
  const gachaStar = document.getElementById('gachaStar');
  const gachaDifficultyInput = document.getElementById('gachaDifficulty');

  // ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡∏≤‡∏ß
  const gachaCharacters = {
    1: ['üê∞','üê•','üê∂'],
    2: ['üê±','üê≠','üêπ'],
    3: ['ü¶ä','üêª','üêº'],
    4: ['üê®','üêØ','ü¶Å'],
    5: ['üê≤','ü¶Ñ','üêâ']
  };

  function initGachaGame() {
    gachaResult.textContent = "";
    gachaStar.textContent = "";
  }

  function getRandomStar(difficulty) {
    // difficulty 0-100: ‡∏¢‡∏¥‡πà‡∏á‡∏™‡∏π‡∏á‡∏¢‡∏¥‡πà‡∏á‡∏á‡πà‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏î‡∏≤‡∏ß‡∏™‡∏π‡∏á
    // ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏î‡∏≤‡∏ß 1-5
    // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: difficulty 30 => ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ 5‡∏î‡∏≤‡∏ß ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 10%
    // ‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏£‡πà‡∏≤‡∏ß‡πÜ: 5‡∏î‡∏≤‡∏ß = difficulty * 0.33%
    let prob5 = Math.min(10 + difficulty * 0.3, 40); // ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 40%
    let prob4 = 25;
    let prob3 = 20;
    let prob2 = 15;
    let prob1 = 100 - prob5 - prob4 - prob3 - prob2;
    // ‡∏£‡∏ß‡∏° 100

    const rand = Math.random() * 100;
    if (rand < prob1) return 1;
    else if (rand < prob1 + prob2) return 2;
    else if (rand < prob1 + prob2 + prob3) return 3;
    else if (rand < prob1 + prob2 + prob3 + prob4) return 4;
    else return 5;
  }

  gachaBtn.addEventListener('click', () => {
    const diff = parseInt(gachaDifficultyInput.value);
    if (isNaN(diff) || diff < 0 || diff > 100) {
      alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 0-100');
      return;
    }
    const star = getRandomStar(diff);
    const charList = gachaCharacters[star];
    const char = charList[Math.floor(Math.random() * charList.length)];
    gachaResult.textContent = `‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏£‡∏∞‡∏î‡∏±‡∏ö ${star} ‡∏î‡∏≤‡∏ß!`;
    gachaStar.textContent = char.repeat(star);
    if (star === 5) {
      unlockCategory('secret');
    }
  });

  // --- ‡πÄ‡∏Å‡∏°‡∏ä‡∏π‡πâ‡∏ï‡∏´‡∏±‡∏ß‡πÉ‡∏à ---
  const shootBtn = document.getElementById('shootBtn');
  const heartShotCount = document.getElementById('heartShotCount');
  const shootMessage = document.getElementById('shootMessage');

  let shots = 0;
  const maxShots = 9;

  function initShootHeartGame() {
    shots = 0;
    heartShotCount.textContent = `‡∏¢‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß ${shots} / ${maxShots} ‡∏£‡∏≠‡∏ö`;
    shootMessage.textContent = "";
    shootBtn.disabled = false;
  }

  shootBtn.addEventListener('click', () => {
    shots++;
    heartShotCount.textContent = `‡∏¢‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß ${shots} / ${maxShots} ‡∏£‡∏≠‡∏ö`;
    if (shots >= maxShots) {
      shootMessage.textContent = "üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ñ‡∏£‡∏ö 9 ‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà!";
      unlockCategory('love');
      shootBtn.disabled = true;
    }
  });

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ)
  function unlockCategory(cat) {
    alert("‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î: " + cat + " ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!");
    // ‡πÉ‡∏™‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
  }

  // ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏á‡πÄ‡∏ß‡πá‡∏ö
  showPage('page7');

  // ‡∏ü‡∏±‡∏á‡∏ä‡∏±‡πà‡∏ô‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°
  document.querySelectorAll('.menu-card').forEach(card => {
    card.addEventListener('click', () => {
      const gameId = card.getAttribute('data-game');
      showPage(gameId);
      initGame(gameId);
    });
  });
</script>

</body>
</html>
