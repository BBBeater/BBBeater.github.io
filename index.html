<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Anniversary Bright&Jeans - Pixel Edition</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lazywasabi/thai-web-fonts@7/fonts/Fixel/Fixel.css">
<style>
  :root {
    --primary-color: #d43f6f;
    --secondary-color: #f48fb1;
    --light-pink-bg: #fff0f5;
    --gradient-start: #ffd6e8;
    --gradient-end: #fff0f5;
    --border-color: #ffb6c1;
    --shadow-color-light: rgba(244,143,177,0.5);
    --shadow-color-dark: #ffb6c1;
    --text-color: #5e2b45;
    --card-bg: #fff0f8;
    /* --- Pixel Style Additions --- */
    --pixel-border: #2c1b24;
    --pixel-shadow: #8d5d6f;
  }

  body {
    font-family: 'Fixel', 'Itim', cursive;
    background: var(--gradient-end);
    color: var(--text-color);
    margin: 0; padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    image-rendering: pixelated;
  }

  button, input, select, textarea {
    font-family: inherit;
  }

  .container {
    width: 95vw;
    max-width: 600px;
    background: var(--light-pink-bg);
    border: 3px solid var(--pixel-border);
    border-radius: 0;
    box-shadow: 8px 8px 0px var(--pixel-shadow);
    padding: 35px 25px 40px;
    text-align: center;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
  }

  .page {
    display: none;
  }
  .page.active {
    display: block;
    animation: fadeIn 0.3s forwards;
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  h1, h2 { color: var(--primary-color); margin-bottom: 25px; line-height: 1.3; }
  p { font-size: 1rem; margin-bottom: 30px; line-height: 1.5; }

  input[type="password"], input[type="number"] {
    font-size: 1.5rem;
    padding: 10px 14px;
    width: 150px;
    border: 2px solid var(--pixel-border);
    border-radius: 0;
    text-align: center;
    margin-bottom: 15px;
    letter-spacing: 0.2em;
    background: white;
  }

  button {
    background-color: var(--secondary-color);
    border: 2px solid var(--pixel-border);
    color: white;
    font-size: 1rem;
    padding: 12px 28px;
    border-radius: 0;
    cursor: pointer;
    margin: 0 10px;
    box-shadow: 4px 4px 0px var(--pixel-border);
    transition: transform 0.1s, box-shadow 0.1s;
  }
  button:hover {
    background-color: var(--primary-color);
    transform: none;
  }
  button:active {
    transform: translate(4px, 4px);
    box-shadow: none;
  }

  .buttons { display: flex; justify-content: center; align-items: center; flex-wrap: wrap; margin-top: 25px; gap: 15px; }
  .back-game-menu-btn { background: var(--border-color); color: var(--text-color); }
  .back-game-menu-btn:hover { background: var(--secondary-color); color: white; }

  #error { color: #c70039; font-weight: bold; margin-top: 8px; }

  .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; justify-items: center; }
  #categoryMenu { grid-template-columns: repeat(3, 1fr); gap: 15px; }
  #bestGrid, #funnyGrid, #secretGrid, #loveGrid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; }
  
  .menu-card { 
    background: var(--card-bg); 
    border: 2px solid var(--pixel-border);
    border-radius: 0; 
    box-shadow: 4px 4px 0px var(--pixel-shadow); 
    cursor: pointer; 
    padding: 15px; 
    width: 140px; 
    height: 120px;
    display: flex; flex-direction: column; justify-content: center; align-items: center; 
    transition: transform 0.1s, box-shadow 0.1s; 
    user-select: none; 
  }
  .menu-card.locked { cursor: default; opacity: 0.6; }
  .menu-card:hover:not(.locked) { 
      transform: translate(2px, 2px); 
      box-shadow: 2px 2px 0px var(--pixel-shadow);
  }
  .menu-card:active:not(.locked) {
      transform: translate(4px, 4px);
      box-shadow: none;
  }
  .menu-card .title { font-weight: bold; color: var(--primary-color); font-size: 1.1rem; text-align: center; margin-bottom: 8px; }

  #lightboxOverlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); display: none; justify-content: center; align-items: center; z-index: 1000; }
  #lightboxOverlay img { max-width: 90vw; max-height: 90vh; border: 4px solid var(--pixel-border); box-shadow: 6px 6px 0 var(--pixel-shadow); border-radius: 0; cursor: pointer; user-select: none; }

  #slideShow { position: relative; width: 100%; max-width: 420px; height: 320px; margin: 0 auto 20px; border: 3px solid var(--pixel-border); border-radius: 0; overflow: hidden; box-shadow: 6px 6px 0px var(--pixel-shadow); }
  #slideShow img { width: 100%; height: 320px; object-fit: cover; position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 0.3s; border-radius: 0; user-select: none; }
  #slideShow img.active { opacity: 1; }
  
  .slide-btn { position: absolute; top: 50%; transform: translateY(-50%); background: white; border: 2px solid var(--pixel-border); color: var(--pixel-border); font-size: 24px; width: 48px; height: 48px; padding: 0; display: flex; justify-content: center; align-items: center; border-radius: 0; cursor: pointer; z-index: 10; }
  .slide-btn:hover { background: var(--secondary-color); color: white; }
  #prevBtn { left: 15px; }
  #nextBtn { right: 15px; }
  
  #lightboxOverlay .slide-btn { position: fixed; z-index: 1001; }
  #lightboxPrevBtn { left: 15px; }
  #lightboxNextBtn { right: 15px; }

  #progressBar { width: 100%; max-width: 420px; height: 10px; background: white; border: 2px solid var(--pixel-border); border-radius: 0; margin: 0 auto 30px; overflow: hidden; }
  #progressBarInner { height: 100%; width: 0%; background: var(--primary-color); border-radius: 0; transition: width 0.4s linear; }
  
  #toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background-color: var(--primary-color); color: white; padding: 16px 24px; border: 3px solid var(--pixel-border); border-radius: 0; box-shadow: 6px 6px 0px var(--pixel-shadow); z-index: 2000; font-size: 1rem; font-weight: bold; transition: top 0.3s; }
  #toast.show { top: 20px; }

  .time-display { background: var(--card-bg); border: 2px solid var(--pixel-border); border-radius: 0; padding: 25px; margin: 20px auto; max-width: 400px; box-shadow: 4px 4px 0 var(--pixel-shadow); }
  .time-value { font-size: 2.5rem; font-weight: bold; color: var(--primary-color); }
  .time-label { font-size: 1.1rem; color: var(--text-color); }

  .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 240px; margin: 20px auto 0; }
  .numpad-btn { padding: 0; width: 60px; height: 60px; border-radius: 0; font-size: 1.5rem; margin: 0; background: white; color: var(--text-color); }
  .numpad-btn.special { background-color: var(--border-color); }
  
  #number-tracker { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; max-width: 320px; margin: 20px auto; }
  .tracker-num { width: 40px; height: 40px; background: #fff2f7; border: 2px solid var(--pixel-border); border-radius: 0; display: flex; justify-content: center; align-items: center; font-weight: bold; }
  .tracker-num.guessed { background-color: #aaa; color: #fff; }
  .tracker-num.correct { background-color: #a5d6a7; }

  #heart {
    background-color: red !important;
    border: 2px solid var(--pixel-border);
    box-shadow: 2px 2px 0 var(--pixel-border);
    border-radius: 0;
    width: 20px !important;
    height: 20px !important;
    font-size: 0 !important;
  }

  @media (max-width: 480px) {
    .container { padding: 25px 15px 30px; }
    #slideShow, #slideShow img { height: 280px; }
    #categoryMenu, #bestGrid, #funnyGrid, #secretGrid, #loveGrid { grid-template-columns: repeat(2, 1fr); gap: 15px; }
    .menu-card { width: 120px; height: 100px; }
    .menu-card .title { font-size: 1rem; }
  }
</style>
</head>
<body>

<script>
  const WEBSITE_DATA = {
    slides: [
      { src: "https://i.postimg.cc/0N49WgJF/LINE-ALBUM-250819-8.jpg", alt: "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°" },
      { src: "‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà 2", alt: "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå" }
    ],
    photos: {
      best: ["https://i.postimg.cc/DwYmJCPf/1.jpg","https://i.postimg.cc/1t1mwbnS/10.jpg"],
      funny: ["https://i.postimg.cc/Ss4XknGc/1.jpg","https://i.postimg.cc/j2dLnBm5/2.jpg"],
      secret: ["https://i.postimg.cc/0N49WgJF/LINE-ALBUM-250819-8.jpg","https://i.postimg.cc/VLFPVdJ3/2.jpg"],
      love: ["https://i.postimg.cc/BQFXL5w2/1.jpg","https://i.postimg.cc/Z5FnjbmR/2.jpg"],
    },
  };
</script>
<div class="container">
  <div id="page0" class="page active">
    <h1>üå∏ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö üå∏</h1><p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô üíñ</p>
    <input type="password" id="password" readonly placeholder="****" />
    <div class="numpad">
        <button type="button" class="numpad-btn" onclick="handleNumpad('1')">1</button><button type="button" class="numpad-btn" onclick="handleNumpad('2')">2</button><button type="button" class="numpad-btn" onclick="handleNumpad('3')">3</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('4')">4</button><button type="button" class="numpad-btn" onclick="handleNumpad('5')">5</button><button type="button" class="numpad-btn" onclick="handleNumpad('6')">6</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('7')">7</button><button type="button" class="numpad-btn" onclick="handleNumpad('8')">8</button><button type="button" class="numpad-btn" onclick="handleNumpad('9')">9</button>
        <button type="button" class="numpad-btn special" onclick="handleNumpad('C')">C</button><button type="button" class="numpad-btn" onclick="handleNumpad('0')">0</button><button type="button" class="numpad-btn special" onclick="handleNumpad('‚Üê')">‚Üê</button>
    </div>
    <div class="buttons"><button type="button" onclick="checkPassword()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</button></div><p id="error"></p>
  </div>
  <div id="page1" class="page">
    <h1>‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏î‡∏µ üíï</h1><div id="slideShow"></div><div id="slideCounter"></div>
    <div id="progressBar"><div id="progressBarInner"></div></div>
    <button id="prevBtn" class="slide-btn" type="button">&#10094;</button>
    <button id="nextBtn" class="slide-btn" type="button">&#10095;</button>
    <div class="buttons"><button type="button" onclick="showPage('page0')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button><button type="button" onclick="showPage('page2')">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button></div>
  </div>
  <div id="page2" class="page">
    <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π üíå</h2>
    <div id="categoryMenu" class="menu-grid">
      <div class="menu-card" data-category="best"><div class="title">‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÅ‡∏ó‡∏ô‡πÉ‡∏à üéÅ</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" data-category="funny"><div class="title">‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô üçï</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" data-category="secret"><div class="title">‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üë©‚Äç‚ù§Ô∏è‚Äçüë®</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" data-category="love"><div class="title">‡∏°‡∏µ‡∏°‡∏ï‡∏•‡∏Å‡πÜ üòÇ</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" data-category="letter"><div class="title">‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏•‡∏±‡∏ö</div><small>üîí ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" onclick="showPage('page9')"><div class="title">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ ‚è±Ô∏è</div><small>‚ù§Ô∏è ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô</small></div>
    </div>
    <div class="buttons"><button type="button" onclick="showPage('page1')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button><button type="button" onclick="showPage('page7')">‡πÑ‡∏õ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ üîì</button></div>
  </div>
  <div id="page3" class="page"><h2>‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÅ‡∏ó‡∏ô‡πÉ‡∏à üéÅ</h2><div class="menu-grid" id="bestGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
  <div id="page4" class="page"><h2>‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô üçï</h2><div class="menu-grid" id="funnyGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
  <div id="page5" class="page"><h2>‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üë©‚Äç‚ù§Ô∏è‚Äçüë®</h2><div class="menu-grid" id="secretGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
  <div id="page6" class="page"><h2>‡∏°‡∏µ‡∏°‡∏ï‡∏•‡∏Å‡πÜ üòÇ</h2><div class="menu-grid" id="loveGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
  <div id="page8" class="page">
      <h2>‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ô‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤ üíå</h2>
      <p style="text-align: left; background: #fff9fb; border: 2px solid var(--pixel-border); box-shadow: 4px 4px 0 var(--pixel-shadow); padding: 20px; border-radius: 0;">
        ‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏∞‡∏Ñ‡∏∞‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Ñ‡∏£‡∏ö1‡∏õ‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ñ‡πâ‡∏≤‡∏î‡∏µ‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡πÜ‡πÄ‡∏•‡∏¢‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏π‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏∂‡∏á‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤‡∏≤<br><br>
        ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô ‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô ‡∏ó‡∏≥‡∏ï‡∏±‡∏ß‡∏ï‡∏•‡∏Å‡πÜ‡πÉ‡∏™‡πà‡∏Å‡∏±‡∏ô ‡∏°‡∏±‡∏ô‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏°‡∏≤‡∏Å‡πÜ‡πÄ‡∏•‡∏¢‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÄ‡∏ò‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ã‡∏±‡∏û‡∏û‡∏≠‡∏ï‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏•‡∏¢ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏∞‡∏Ñ‡∏∞
        <br><br>
        ‡∏£‡∏±‡∏Å‡∏¢‡∏µ‡∏ô‡∏™‡πå‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•‡πÑ‡∏û‡∏®‡∏≤‡∏• üíñ
      </p>
      <div class="buttons"><button onclick="showPage('page2')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏°‡∏ô‡∏π</button></div>
  </div>
  <div id="page9" class="page">
    <h2>‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô üóìÔ∏è</h2>
    <div class="time-display">
      <div class="time-segment">
        <span class="time-value" id="years">0</span><span class="time-label"> ‡∏õ‡∏µ</span>
        <span class="time-value" id="months">0</span><span class="time-label"> ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
        <span class="time-value" id="days">0</span><span class="time-label"> ‡∏ß‡∏±‡∏ô</span>
      </div>
      <div class="time-segment">
        <span class="time-value" id="hours">00</span><span class="time-label">:</span>
        <span class="time-value" id="minutes">00</span><span class="time-label">:</span>
        <span class="time-value" id="seconds">00</span>
      </div>
    </div>
    <div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div>
  </div>
  <div id="page7" class="page">
    <h2>üéÆ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ! üéÆ</h2>
    <div class="menu-grid" id="gameMenuGrid">
      <div class="menu-card" onclick="showGame('gameGuessNumber')"><div class="title">‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç üé≤</div></div>
      <div class="menu-card" onclick="showGame('gameCardShuffle')"><div class="title">‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à üÉè</div></div>
      <div class="menu-card" onclick="showGame('gameGacha')"><div class="title">‡∏Å‡∏≤‡∏ä‡∏≤‡∏î‡∏≤‡∏ß 5 ‚≠ê</div></div>
      <div class="menu-card" onclick="showGame('gameShootHearts')"><div class="title">‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á üíò</div></div>
    </div>
    <div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div>
  </div>
  <div id="gameGuessNumber" class="page">
    <h2>‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç (1-10)</h2><p>‡∏•‡∏≠‡∏á‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏Ñ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏¥! üé≤</p><div id="number-tracker"></div>
    <input type="number" id="guessInput" min="1" max="10" /><div id="gameMessage"></div>
    <div class="buttons"><button type="button" onclick="checkGuess()">‡∏ó‡∏≤‡∏¢!</button><button type="button" class="back-game-menu-btn" onclick="showPage('page7')">‡∏Å‡∏•‡∏±‡∏ö</button></div>
  </div>
  <div id="gameCardShuffle" class="page">
    <h2>‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à üÉè</h2><p>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏û‡πà‡∏´‡∏≤‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏ô 3 ‡πÉ‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏à‡∏≠! ‚ô•Ô∏è</p>
    <div id="cardContainer" style="display:flex; justify-content:center; gap:20px; margin: 25px 0;"></div>
    <div id="puzzleMessage"></div>
    <div class="buttons"><button type="button" onclick="startCardShuffleGame()">‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</button><button type="button" class="back-game-menu-btn" onclick="showPage('page7')">‡∏Å‡∏•‡∏±‡∏ö</button></div>
  </div>
  <div id="gameGacha" class="page">
    <h2>‡∏Å‡∏≤‡∏ä‡∏≤‡∏î‡∏≤‡∏ß 5 ‚≠ê</h2><p>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏î‡∏≤‡∏ß ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏û‡∏¥‡πÄ‡∏®‡∏©!</p><div id="gacha-display">‚ùì</div>
    <div id="gachaResult"></div>
    <div class="buttons"><button type="button" onclick="startGacha()">‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°</button><button type="button" class="back-game-menu-btn" onclick="showPage('page7')">‡∏Å‡∏•‡∏±‡∏ö</button></div>
  </div>
  <div id="gameShootHearts" class="page">
    <h2>‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á üíò</h2><p>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '‡∏¢‡∏¥‡∏á' ‡∏Ñ‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏û‡∏•‡∏±‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏•‡πà‡∏≠‡∏¢!</p>
    <div style="position: relative; margin: 20px auto; width: 320px; height: 280px; background: var(--border-color);">
      <div id="hoop" style="position: absolute; width: 100px; height: 20px; background: #ff69b4; border-radius: 10px; top: 80px; left: 50%; transform: translateX(-50%);"></div>
      <div id="heart" style="position: absolute; font-size: 40px; color: red; top: 220px; left: 50%; transform: translateX(-50%); line-height: 1;">‚ù§Ô∏è</div>
    </div>
    <p id="shootMessage"></p>
    <div class="buttons"><button type="button" id="shootBtn">‚ù§Ô∏è ‡∏¢‡∏¥‡∏á!</button><button type="button" class="back-game-menu-btn" onclick="showPage('page7')">‡∏Å‡∏•‡∏±‡∏ö</button></div>
  </div>
  <div id="lightboxOverlay">
    <button id="lightboxPrevBtn" class="slide-btn" type="button">&#10094;</button>
    <img id="lightboxImage" src="" alt="‡∏Ç‡∏¢‡∏≤‡∏¢‡∏£‡∏π‡∏õ" />
    <button id="lightboxNextBtn" class="slide-btn" type="button">&#10095;</button>
  </div>
  <div id="toast"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const CONFIG = { password: "0909", anniversaryDate: "2024-09-09T00:00:00", };
    const CATEGORY_NAMES = { best: "‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÅ‡∏ó‡∏ô‡πÉ‡∏à", funny: "‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô", secret: "‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤", love: "‡∏°‡∏µ‡∏°‡∏ï‡∏•‡∏Å‡πÜ" };
    let state = { currentPageId: 'page0', currentSlideIndex: 0, unlocked: { best: false, funny: false, secret: false, love: false, letter: false }, gachaPullCount: 0 };
    let game_state = {}; let currentGallery = []; let currentGalleryIndex = 0;
    const elements = { passwordInput: document.getElementById('password'), errorMsg: document.getElementById('error'), slideShowContainer: document.getElementById('slideShow'), slideCounter: document.getElementById('slideCounter'), progressBarInner: document.getElementById('progressBarInner'), lightboxOverlay: document.getElementById('lightboxOverlay'), lightboxImage: document.getElementById('lightboxImage'), toast: document.getElementById('toast'), years: document.getElementById('years'), months: document.getElementById('months'), days: document.getElementById('days'), hours: document.getElementById('hours'), minutes: document.getElementById('minutes'), seconds: document.getElementById('seconds'), lightboxPrevBtn: document.getElementById('lightboxPrevBtn'), lightboxNextBtn: document.getElementById('lightboxNextBtn'), shootBtn: document.getElementById('shootBtn'), heart: document.getElementById('heart'), hoop: document.getElementById('hoop'), shootMessage: document.getElementById('shootMessage'), };
    function loadState() { const savedState = JSON.parse(localStorage.getItem('anniversaryGameState')); if (savedState) { state = { ...state, ...savedState }; state.unlocked = { ...state.unlocked, ...savedState.unlocked }; } }
    function saveState() { localStorage.setItem('anniversaryGameState', JSON.stringify(state)); }
    function showToast(message) { elements.toast.textContent = message; elements.toast.classList.add('show'); setTimeout(() => { elements.toast.classList.remove('show'); }, 3000); }
    window.showPage = (id) => { document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); document.getElementById(id).classList.add('active'); state.currentPageId = id; onPageLoad(id); };
    function onPageLoad(id) { if (id === 'page1') updateSlideShow(); if (id === 'page2') updateCategoryLocks(); const photoPageMap = { page3: 'best', page4: 'funny', page5: 'secret', page6: 'love' }; if (photoPageMap[id]) loadPhotos(photoPageMap[id]); }
    window.showGame = (gameId) => { showPage(gameId); const gameMap = { gameGuessNumber: startGuessNumberGame, gameCardShuffle: startCardShuffleGame, gameGacha: startGacha, gameShootHearts: startShootHeartGame, }; if(gameMap[gameId]) gameMap[gameId](); }
    let cPressCount = 0;
    window.handleNumpad = (value) => { if (value === 'C') { elements.passwordInput.value = ''; cPressCount++; if (cPressCount >= 5) { Object.keys(state.unlocked).forEach(key => { state.unlocked[key] = false; }); state.gachaPullCount = 0; saveState(); showToast("‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!"); cPressCount = 0; } } else { cPressCount = 0; if (value === '‚Üê') { elements.passwordInput.value = elements.passwordInput.value.slice(0, -1); } else if (elements.passwordInput.value.length < 4) { elements.passwordInput.value += value; } } }
    window.checkPassword = () => { if (elements.passwordInput.value === CONFIG.password) { showPage("page1"); elements.errorMsg.textContent = ""; elements.passwordInput.value = ""; } else { elements.errorMsg.textContent = "‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!"; } };
    function unlockCategory(cat) { if (!state.unlocked[cat]) { state.unlocked[cat] = true; saveState(); const displayName = CATEGORY_NAMES[cat] || cat; showToast(`üéâ ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ '${displayName}' ‡πÅ‡∏•‡πâ‡∏ß!`); setTimeout(() => showPage("page2"), 500); } }
    function setupSlideshow() { elements.slideShowContainer.innerHTML = WEBSITE_DATA.slides.map((s, i) => `<img src="${s.src}" alt="${s.alt}" class="${i === 0 ? 'active' : ''}" />`).join(''); updateSlideShow(); }
    window.changeSlide = (dir) => { state.currentSlideIndex = (state.currentSlideIndex + dir + WEBSITE_DATA.slides.length) % WEBSITE_DATA.slides.length; updateSlideShow(); };
    function updateSlideShow() { const slideImages = elements.slideShowContainer.querySelectorAll('img'); slideImages.forEach((img, i) => { img.classList.toggle("active", i === state.currentSlideIndex); }); const total = WEBSITE_DATA.slides.length; elements.slideCounter.textContent = `‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà ${state.currentSlideIndex + 1} / ${total}`; elements.progressBarInner.style.width = `${((state.currentSlideIndex + 1) / total) * 100}%`; }
    function updateCategoryLocks() { const allUnlocked = state.unlocked.best && state.unlocked.funny && state.unlocked.secret && state.unlocked.love; if (allUnlocked && !state.unlocked.letter) { state.unlocked.letter = true; saveState(); } document.querySelectorAll("#categoryMenu .menu-card[data-category]").forEach(card => { const cat = card.dataset.category; const pageMap = { best: 'page3', funny: 'page4', secret: 'page5', love: 'page6', letter: 'page8' }; if (cat && state.unlocked[cat]) { card.classList.remove("locked"); card.querySelector("small").textContent = "üîì ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß"; card.onclick = () => showPage(pageMap[cat]); } else if (cat) { card.classList.add("locked"); if (cat === 'letter') { card.querySelector("small").textContent = "üîí ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô"; } else { card.querySelector("small").textContent = "üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô"; } card.onclick = null; } }); }
    function loadPhotos(category) { const containerId = `${category}Grid`; const container = document.getElementById(containerId); container.innerHTML = ""; if (!state.unlocked[category]) { container.innerHTML = "<p>üîí ‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¢‡∏π‡πà!</p>"; return; } WEBSITE_DATA.photos[category].forEach((url, i) => { const photoCard = document.createElement('div'); photoCard.className = 'menu-card'; photoCard.style.width = "120px"; photoCard.style.height = "120px"; photoCard.innerHTML = `<img src="${url}" style="width:100%; height:100%; object-fit: cover; margin-bottom: 0;">`; photoCard.onclick = () => openLightbox(category, i); container.appendChild(photoCard); }); }
    function updateGalleryImage() { elements.lightboxImage.src = currentGallery[currentGalleryIndex]; }
    function openLightbox(category, index) { currentGallery = WEBSITE_DATA.photos[category]; currentGalleryIndex = index; updateGalleryImage(); elements.lightboxOverlay.style.display = "flex"; }
    function updateAnniversaryCounter() { const startDate = new Date(CONFIG.anniversaryDate); const now = new Date(); let years = now.getFullYear() - startDate.getFullYear(); let months = now.getMonth() - startDate.getMonth(); let days = now.getDate() - startDate.getDate(); let hours = now.getHours() - startDate.getHours(); let minutes = now.getMinutes() - startDate.getMinutes(); let seconds = now.getSeconds() - startDate.getSeconds(); if (seconds < 0) { seconds += 60; minutes--; } if (minutes < 0) { minutes += 60; hours--; } if (hours < 0) { hours += 24; days--; } if (days < 0) { months--; const daysInLastMonth = new Date(now.getFullYear(), now.getMonth(), 0).getDate(); days += daysInLastMonth; } if (months < 0) { months += 12; years--; } elements.years.textContent = years; elements.months.textContent = months; elements.days.textContent = days; elements.hours.textContent = String(hours).padStart(2, '0'); elements.minutes.textContent = String(minutes).padStart(2, '0'); elements.seconds.textContent = String(seconds).padStart(2, '0'); }
    function startGuessNumberGame() { game_state.targetNumber = Math.floor(Math.random() * 10) + 1; const tracker = document.getElementById('number-tracker'); tracker.innerHTML = ''; for (let i = 1; i <= 10; i++) { tracker.innerHTML += `<div class="tracker-num" data-num="${i}">${i}</div>`; } document.getElementById("gameMessage").textContent = ""; document.getElementById("guessInput").value = ""; }
    window.checkGuess = () => { const input = document.getElementById("guessInput"); const message = document.getElementById("gameMessage"); const val = parseInt(input.value); if (!val || val < 1 || val > 10) { message.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 1-10 ‡∏ô‡∏∞!"; return; } const guessedNumEl = document.querySelector(`.tracker-num[data-num="${val}"]`); if (val === game_state.targetNumber) { message.textContent = `üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ${CATEGORY_NAMES['best']} ‡πÅ‡∏•‡πâ‡∏ß!`; if(guessedNumEl) guessedNumEl.classList.add('correct'); unlockCategory("best"); } else { message.textContent = "‡∏ú‡∏¥‡∏î‡∏ô‡∏∞ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á!"; if(guessedNumEl) guessedNumEl.classList.add('guessed'); } };
    function startCardShuffleGame() { game_state.cardsPicked = false; const container = document.getElementById("cardContainer"); container.innerHTML = [0,1,2].map(() => `<div class="card" style="width:90px; height:120px; background:#ffe1e9; border-radius:16px; cursor:pointer; box-shadow: 0 0 15px #ffb6c1; display:flex; justify-content:center; align-items:center; font-size: 2rem;">?</div>`).join(''); const cards = container.querySelectorAll(".card"); cards.forEach((card, i) => card.onclick = () => pickCard(i)); const emojis = ["‚ô•Ô∏è", "üçÄ", "‚≠ê"]; let shuffled = emojis.sort(() => Math.random() - 0.5); game_state.heartIndex = shuffled.findIndex(e => e === "‚ô•Ô∏è"); cards.forEach((card, i) => card.setAttribute("data-emoji", shuffled[i])); document.getElementById("puzzleMessage").textContent = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏•‡∏¢~ üíò"; }
    window.pickCard = (i) => { if (game_state.cardsPicked) return; game_state.cardsPicked = true; const message = document.getElementById("puzzleMessage"); const cards = document.getElementById("cardContainer").querySelectorAll(".card"); cards.forEach(card => { card.textContent = card.getAttribute("data-emoji"); card.style.pointerEvents = "none"; }); if (i === game_state.heartIndex) { message.textContent = `üéâ ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ${CATEGORY_NAMES['funny']} ‡πÅ‡∏•‡πâ‡∏ß!`; unlockCategory("funny"); } else { message.textContent = "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ô‡πâ‡∏≤~ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞ üí¶"; } };
    function startGacha() { const gachaPool = [ { emoji: 'üç§', stars: 1 }, { emoji: 'üê∞', stars: 2 }, { emoji: 'üêπ', stars: 3 }, { emoji: '‚ú®', stars: 4 }, { emoji: 'ü©µ', stars: 5 } ]; const display = document.getElementById("gacha-display"); const resultDiv = document.getElementById("gachaResult"); state.gachaPullCount = (state.gachaPullCount || 0) + 1; saveState(); resultDiv.textContent = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°... (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${state.gachaPullCount})`; display.textContent = "‚ùì"; let spinCount = 0; const spinInterval = setInterval(() => { display.textContent = gachaPool[Math.floor(Math.random() * gachaPool.length)].emoji; spinCount++; if (spinCount >= 15) { clearInterval(spinInterval); let result; if (state.gachaPullCount >= 10) { result = gachaPool.find(item => item.stars === 5); state.gachaPullCount = 0; saveState(); } else { result = gachaPool[Math.floor(Math.random() * gachaPool.length)]; } display.textContent = result.emoji; let starText = "‚≠ê".repeat(result.stars); resultDiv.textContent = `‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ '${result.emoji}' ‡∏£‡∏∞‡∏î‡∏±‡∏ö ${result.stars} ‡∏î‡∏≤‡∏ß! ${starText}`; if (result.stars === 5) { resultDiv.textContent += ` üíñ ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ${CATEGORY_NAMES['secret']} ‡πÅ‡∏•‡πâ‡∏ß!`; unlockCategory("secret"); } } }, 120); }
    function startShootHeartGame() { game_state.shootGameScore = 0; game_state.isShooting = false; elements.shootMessage.textContent = `‡∏¢‡∏¥‡∏á‡πÉ‡∏´‡πâ‡∏•‡∏á 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á! (${game_state.shootGameScore}/5)`; let hoopDirection = 1; if (game_state.hoopInterval) clearInterval(game_state.hoopInterval); elements.hoop.style.left = "160px"; game_state.hoopInterval = setInterval(() => { let left = parseFloat(elements.hoop.style.left); left += hoopDirection * 2; if (left > 220 || left < 100) hoopDirection *= -1; elements.hoop.style.left = `${left}px`; }, 30); }
    function shootHeart(power) { if(game_state.isShooting) return; game_state.isShooting = true; let velocityY = -power; let posY = parseFloat(elements.heart.style.top); const animate = () => { posY += velocityY; velocityY += 0.3; elements.heart.style.top = `${posY}px`; const heartBox = elements.heart.getBoundingClientRect(); const hoopBox = elements.hoop.getBoundingClientRect(); const heartCenterX = heartBox.left + heartBox.width / 2; const heartCenterY = heartBox.top + heartBox.height / 2; const isHorizontallyAligned = heartCenterX > hoopBox.left && heartCenterX < hoopBox.right; const isVerticallyAligned = heartCenterY > hoopBox.top && heartCenterY < hoopBox.bottom; if (isHorizontallyAligned && isVerticallyAligned && velocityY > 0) { game_state.shootGameScore++; elements.shootMessage.textContent = `‚úÖ ‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á‡πÅ‡∏•‡πâ‡∏ß! (${game_state.shootGameScore}/5)`; if (game_state.shootGameScore >= 5) { unlockCategory("love"); elements.shootMessage.textContent += " ‚ù§Ô∏è ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!"; } resetHeart(); return; } if (posY > 300) { elements.shootMessage.textContent = "‚ùå ‡∏û‡∏•‡∏≤‡∏î! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞"; resetHeart(); return; } requestAnimationFrame(animate); }; requestAnimationFrame(animate); }
    function resetHeart() { setTimeout(() => { elements.heart.style.top = "220px"; game_state.isShooting = false; }, 500); }
    elements.shootBtn.onmousedown = elements.shootBtn.ontouchstart = (e) => { e.preventDefault(); if(game_state.isShooting) return; game_state.chargeStartTime = Date.now(); elements.shootBtn.style.transform = 'scale(1.1)'; };
    elements.shootBtn.onmouseup = elements.shootBtn.ontouchend = (e) => { e.preventDefault(); if(!game_state.chargeStartTime) return; const holdTime = Date.now() - game_state.chargeStartTime; const power = Math.min(Math.max(holdTime / 80, 5), 12); shootHeart(power); game_state.chargeStartTime = 0; elements.shootBtn.style.transform = 'scale(1)'; };
    
    // --- INITIALIZE ---
    loadState();
    setupSlideshow();
    elements.lightboxOverlay.onclick = (event) => { if (event.target === elements.lightboxOverlay) { elements.lightboxOverlay.style.display = "none"; } };
    elements.lightboxPrevBtn.onclick = (event) => { event.stopPropagation(); currentGalleryIndex = (currentGalleryIndex - 1 + currentGallery.length) % currentGallery.length; updateGalleryImage(); };
    elements.lightboxNextBtn.onclick = (event) => { event.stopPropagation(); currentGalleryIndex = (currentGalleryIndex + 1) % currentGallery.length; updateGalleryImage(); };
    setInterval(updateAnniversaryCounter, 1000);
    updateAnniversaryCounter();
    showPage('page0');
});
</script>
</body>
</html>
}
‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞
‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡∏°‡∏à‡∏∞‡∏¢‡∏∂‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á‡∏°‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å ‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ **‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡πÇ‡∏Ñ‡πâd‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏±‡∏ö

‡∏ú‡∏° **‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Å‡∏°** ‡πÄ‡∏•‡∏¢‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏Ñ‡πà‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ (comment) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡πÄ‡∏à‡∏≠‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö

‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á JavaScript ‡∏ú‡∏°‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÄ‡∏ä‡πà‡∏ô:
* ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (CONFIG & STATE)
* ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ (CORE APP FUNCTIONS)
* ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô UI (UI FUNCTIONS)
* ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏° (GAMES) ‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏Å‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏±‡∏ô

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏∞‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡πÄ‡∏à‡∏≠‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö:

```text
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Happy Anniversary Bright&Jeans</title>
    <link href="[https://fonts.googleapis.com/css2?family=Itim&display=swap](https://fonts.googleapis.com/css2?family=Itim&display=swap)" rel="stylesheet" />
    <style>
      /* --- ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å (CSS Variables) --- */
      :root {
        --primary-color: #d43f6f;
        --secondary-color: #f48fb1;
        --light-pink-bg: #fff0f5;
        --gradient-start: #ffd6e8;
        --gradient-end: #fff0f5;
        --border-color: #ffb6c1;
        --shadow-color-light: rgba(244,143,177,0.5);
        --shadow-color-dark: #ffb6c1;
        --text-color: #5e2b45;
        --card-bg: #fff0f8;
      }

      /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (General Styles) --- */
      body {
        font-family: 'Itim', cursive;
        background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
        color: var(--text-color);
        margin: 0; padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }

      button, input, select, textarea {
        font-family: inherit;
      }

      .container {
        width: 95vw;
        max-width: 600px;
        background: white;
        border-radius: 25px;
        box-shadow: 0 0 25px var(--shadow-color-dark);
        padding: 35px 25px 40px;
        text-align: center;
        box-sizing: border-box;
        position: relative;
        overflow: hidden;
      }
      
      h1, h2 { color: var(--primary-color); margin-bottom: 25px; }
      p { font-size: 1.2rem; margin-bottom: 30px; line-height: 1.4; }

      /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (Page Styles & Transitions) --- */
      .page { display: none; }
      .page.active { display: block; animation: fadeIn 0.4s ease-in-out; }
      @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

      /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏° (Forms & Buttons) --- */
      input[type="password"], input[type="number"] {
        font-size: 20px;
        padding: 10px 14px;
        width: 150px;
        border: 2px solid var(--border-color);
        border-radius: 12px;
        text-align: center;
        margin-bottom: 15px;
        letter-spacing: 0.2em;
      }

      button {
        background-color: var(--secondary-color);
        border: none;
        color: white;
        font-size: 18px;
        padding: 12px 28px;
        border-radius: 20px;
        cursor: pointer;
        margin: 0 10px;
        transition: background-color 0.3s ease, transform 0.2s ease;
        box-shadow: 0 4px 10px var(--shadow-color-light);
      }
      button:hover {
        background-color: var(--primary-color);
        transform: translateY(-2px);
      }

      .buttons { display: flex; justify-content: center; align-items: center; flex-wrap: wrap; margin-top: 25px; gap: 15px; }
      .back-game-menu-btn { background: #f8bbd0; color: #a6265a; border-radius: 25px; padding: 8px 22px; margin: 0; box-shadow: 0 3px 8px rgba(248,187,208,0.6); }
      .back-game-menu-btn:hover { background: var(--primary-color); color: white; }
      
      /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏°‡∏ô‡∏π (Menu Card Styles) --- */
      .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; justify-items: center; }
      #categoryMenu { grid-template-columns: repeat(3, 1fr); gap: 15px; }
      #bestGrid, #funnyGrid, #secretGrid, #loveGrid { grid-template-columns: repeat(3, 1fr); gap: 15px; }
      .menu-card { 
        background: var(--card-bg); 
        border-radius: 20px; 
        box-shadow: 0 0 12px var(--shadow-color-dark); 
        cursor: pointer; 
        padding: 15px; 
        width: 140px; 
        height: 120px;
        display: flex; flex-direction: column; justify-content: center; align-items: center; 
        transition: transform 0.3s ease, box-shadow 0.3s ease; 
        user-select: none; 
      }
      .menu-card.locked { cursor: default; opacity: 0.6; }
      .menu-card:hover:not(.locked) { transform: scale(1.07); box-shadow: 0 0 20px var(--primary-color); }
      .menu-card .title { font-weight: bold; color: var(--primary-color); font-size: 1.25rem; text-align: center; margin-bottom: 8px; }
      
      /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå UI ‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other UI Styles) --- */
      #error { color: var(--primary-color); font-weight: bold; margin-top: 8px; }
      #toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background-color: var(--primary-color); color: white; padding: 16px 24px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2000; font-size: 1.1rem; font-weight: bold; transition: top 0.5s ease-in-out; }
      #toast.show { top: 20px; }
      #lightboxOverlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(95, 35, 70, 0.9); display: none; justify-content: center; align-items: center; z-index: 1000; }
      #lightboxOverlay img { max-width: 90vw; max-height: 90vh; border-radius: 20px; box-shadow: 0 0 25px var(--shadow-color-dark); cursor: pointer; user-select: none; }
      
      /* --- ‡∏™‡πÑ‡∏•‡∏î‡πå‡πÇ‡∏ä‡∏ß‡πå (Slideshow) --- */
      #slideShow { position: relative; width: 100%; max-width: 420px; height: 320px; margin: 0 auto 20px; border-radius: 25px; overflow: hidden; box-shadow: 0 0 15px var(--shadow-color-dark); }
      #slideShow img { width: 100%; height: 320px; object-fit: cover; position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 0.6s ease; border-radius: 25px; user-select: none; }
      #slideShow img.active { opacity: 1; }
      .slide-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255, 255, 255, 0.5); backdrop-filter: blur(2px); border: 1px solid rgba(255, 255, 255, 0.2); color: var(--primary-color); font-size: 24px; width: 48px; height: 48px; padding: 0; display: flex; justify-content: center; align-items: center; border-radius: 50%; cursor: pointer; user-select: none; transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease; z-index: 10; }
      .slide-btn:hover { background: var(--primary-color); color: white; transform: translateY(-50%); }
      #prevBtn { left: 15px; }
      #nextBtn { right: 15px; }
      #lightboxOverlay .slide-btn { position: fixed; z-index: 1001; }
      #lightboxPrevBtn { left: 15px; }
      #lightboxNextBtn { right: 15px; }
      #slideCounter { margin: 0 auto 10px; font-weight: bold; color: var(--primary-color); }
      #progressBar { width: 100%; max-width: 420px; height: 6px; background: #ffe4ef; border-radius: 6px; margin: 0 auto 30px; overflow: hidden; }
      #progressBarInner { height: 100%; width: 0%; background: var(--primary-color); border-radius: 6px; transition: width 0.4s ease; }

      /* --- ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ (Time Counter) --- */
      .time-display { background: var(--card-bg); border-radius: 20px; padding: 25px; margin: 20px auto; max-width: 400px; }
      .time-segment { margin: 10px 0; }
      .time-value { font-size: 2.5rem; font-weight: bold; color: var(--primary-color); }
      .time-label { font-size: 1.1rem; color: var(--text-color); }
      
      /* --- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏Å‡∏° (Numpad & Game Helpers) --- */
      .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 240px; margin: 20px auto 0; }
      .numpad-btn { padding: 0; width: 60px; height: 60px; border-radius: 50%; font-size: 1.5rem; margin: 0; }
      .numpad-btn.special { background-color: #f8bbd0; color: #a6265a; }
      #number-tracker { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; max-width: 320px; margin: 20px auto; }
      .tracker-num { width: 40px; height: 40px; background: #fff2f7; border: 2px solid var(--border-color); border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; transition: background-color 0.3s, opacity 0.3s; }
      .tracker-num.guessed { background-color: #e0e0e0; color: #9e9e9e; border-color: #ccc; }
      .tracker-num.correct { background-color: #a5d6a7; color: #1b5e20; border-color: #388e3c; }

      /* --- Responsive --- */
      @media (max-width: 480px) {
        .container { padding: 25px 15px 30px; }
        #slideShow, #slideShow img { height: 280px; }
        #categoryMenu { grid-template-columns: repeat(2, 1fr); gap: 20px; }
        #bestGrid, #funnyGrid, #secretGrid, #loveGrid { grid-template-columns: repeat(2, 1fr); }
        .menu-card { width: 120px; height: 100px; }
        .menu-card .title { font-size: 1.1rem; }
        input[type="password"], input[type="number"] { width: 120px; font-size: 18px; }
        .slide-btn { width: 40px; height: 40px; font-size: 20px; }
        #prevBtn { left: 10px; }
        #nextBtn { right: 10px; }
        .numpad-btn { width: 50px; height: 50px; font-size: 1.2rem; }
        .tracker-num { width: 35px; height: 35px; }
        .time-value { font-size: 2rem; }
      }
    </style>
</head>
<body>

<script>
  const WEBSITE_DATA = {
    slides: [
      { src: "[https://i.postimg.cc/0N49WgJF/LINE-ALBUM-250819-8.jpg](https://i.postimg.cc/0N49WgJF/LINE-ALBUM-250819-8.jpg)", alt: "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°" },
      { src: "‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà 2 ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà", alt: "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå" }
    ],
    photos: {
      best: ["[https://i.postimg.cc/DwYmJCPf/1.jpg](https://i.postimg.cc/DwYmJCPf/1.jpg)"],
      funny: ["[https://i.postimg.cc/Ss4XknGc/1.jpg](https://i.postimg.cc/Ss4XknGc/1.jpg)"],
      secret: ["[https://i.postimg.cc/0N49WgJF/LINE-ALBUM-250819-8.jpg](https://i.postimg.cc/0N49WgJF/LINE-ALBUM-250819-8.jpg)"],
      love: ["[https://i.postimg.cc/BQFXL5w2/1.jpg](https://i.postimg.cc/BQFXL5w2/1.jpg)"]
    }
  };
</script>
<div class="container">
    <div id="page0" class="page active">
        <h1>üå∏ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö üå∏</h1><p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô üíñ</p>
        <input type="password" id="password" readonly placeholder="****" />
        <div class="numpad">
            <button type="button" class="numpad-btn" onclick="handleNumpad('1')">1</button><button type="button" class="numpad-btn" onclick="handleNumpad('2')">2</button><button type="button" class="numpad-btn" onclick="handleNumpad('3')">3</button>
            <button type="button" class="numpad-btn" onclick="handleNumpad('4')">4</button><button type="button" class="numpad-btn" onclick="handleNumpad('5')">5</button><button type="button" class="numpad-btn" onclick="handleNumpad('6')">6</button>
            <button type="button" class="numpad-btn" onclick="handleNumpad('7')">7</button><button type="button" class="numpad-btn" onclick="handleNumpad('8')">8</button><button type="button" class="numpad-btn" onclick="handleNumpad('9')">9</button>
            <button type="button" class="numpad-btn special" onclick="handleNumpad('C')">C</button><button type="button" class="numpad-btn" onclick="handleNumpad('0')">0</button><button type="button" class="numpad-btn special" onclick="handleNumpad('‚Üê')">‚Üê</button>
        </div>
        <div class="buttons"><button type="button" onclick="checkPassword()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</button></div><p id="error"></p>
    </div>

    <div id="page1" class="page">
        <h1>‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏î‡∏µ üíï</h1><div id="slideShow"></div><div id="slideCounter"></div>
        <div id="progressBar"><div id="progressBarInner"></div></div>
        <button id="prevBtn" class="slide-btn" type="button">&#10094;</button>
        <button id="nextBtn" class="slide-btn" type="button">&#10095;</button>
        <div class="buttons"><button type="button" onclick="showPage('page0')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button><button type="button" onclick="showPage('page2')">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button></div>
    </div>

    <div id="page2" class="page">
        <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π üíå</h2>
        <div id="categoryMenu" class="menu-grid">
            <div class="menu-card" data-category="best"><div class="title">‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÅ‡∏ó‡∏ô‡πÉ‡∏à üéÅ</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
            <div class="menu-card" data-category="funny"><div class="title">‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô üçï</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
            <div class="menu-card" data-category="secret"><div class="title">‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üë©‚Äç‚ù§Ô∏è‚Äçüë®</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
            <div class="menu-card" data-category="love"><div class="title">‡∏°‡∏µ‡∏°‡∏ï‡∏•‡∏Å‡πÜ üòÇ</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
            <div class="menu-card" data-category="letter"><div class="title">‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏•‡∏±‡∏ö</div><small>üîí ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô</small></div>
            <div class="menu-card" onclick="showPage('page9')"><div class="title">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ ‚è±Ô∏è</div><small>‚ù§Ô∏è ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô</small></div>
        </div>
        <div class="buttons"><button type="button" onclick="showPage('page1')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button><button type="button" onclick="showPage('page7')">‡πÑ‡∏õ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ üîì</button></div>
    </div>

    <div id="page3" class="page"><h2>‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÅ‡∏ó‡∏ô‡πÉ‡∏à üéÅ</h2><div class="menu-grid" id="bestGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
    <div id="page4" class="page"><h2>‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô üçï</h2><div class="menu-grid" id="funnyGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
    <div id="page5" class="page"><h2>‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üë©‚Äç‚ù§Ô∏è‚Äçüë®</h2><div class="menu-grid" id="secretGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
    <div id="page6" class="page"><h2>‡∏°‡∏µ‡∏°‡∏ï‡∏•‡∏Å‡πÜ üòÇ</h2><div class="menu-grid" id="loveGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
    
    <div id="page8" class="page">
        <h2>‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ô‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤ üíå</h2>
        <p style="text-align: left; background: #fff9fb; padding: 20px; border-radius: 15px; border: 1px solid var(--border-color);">
            ‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏∞‡∏Ñ‡∏∞‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Ñ‡∏£‡∏ö1‡∏õ‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ñ‡πâ‡∏≤‡∏î‡∏µ‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡πÜ‡πÄ‡∏•‡∏¢‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏π‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏∂‡∏á‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤‡∏≤<br><br>
            ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô ‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô ‡∏ó‡∏≥‡∏ï‡∏±‡∏ß‡∏ï‡∏•‡∏Å‡πÜ‡πÉ‡∏™‡πà‡∏Å‡∏±‡∏ô ‡∏°‡∏±‡∏ô‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏°‡∏≤‡∏Å‡πÜ‡πÄ‡∏•‡∏¢‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÄ‡∏ò‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ã‡∏±‡∏û‡∏û‡∏≠‡∏ï‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏•‡∏¢ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏∞‡∏Ñ‡∏∞
            <br><br>
            ‡∏£‡∏±‡∏Å‡∏¢‡∏µ‡∏ô‡∏™‡πå‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•‡πÑ‡∏û‡∏®‡∏≤‡∏• üíñ
        </p>
        <div class="buttons"><button onclick="showPage('page2')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏°‡∏ô‡∏π</button></div>
    </div>

    <div id="page9" class="page">
        <h2>‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô üóìÔ∏è</h2>
        <div class="time-display">
            <div class="time-segment">
                <span class="time-value" id="years">0</span><span class="time-label"> ‡∏õ‡∏µ</span>
                <span class="time-value" id="months">0</span><span class="time-label"> ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
                <span class="time-value" id="days">0</span><span class="time-label"> ‡∏ß‡∏±‡∏ô</span>
            </div>
            <div class="time-segment">
                <span class="time-value" id="hours">00</span><span class="time-label">:</span>
                <span class="time-value" id="minutes">00</span><span class="time-label">:</span>
                <span class="time-value" id="seconds">00</span>
            </div>
        </div>
        <div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div>
    </div>

    <div id="page7" class="page">
        <h2>üéÆ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ! üéÆ</h2>
        <div class="menu-grid" id="gameMenuGrid">
          <div class="menu-card" onclick="showGame('gameGuessNumber')"><div class="title">‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç üé≤</div></div>
          <div class="menu-card" onclick="showGame('gameCardShuffle')"><div class="title">‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à üÉè</div></div>
          <div class="menu-card" onclick="showGame('gameGacha')"><div class="title">‡∏Å‡∏≤‡∏ä‡∏≤‡∏î‡∏≤‡∏ß 5 ‚≠ê</div></div>
          <div class="menu-card" onclick="showGame('gameShootHearts')"><div class="title">‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á üíò</div></div>
        </div>
        <div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div>
    </div>

    <div id="gameGuessNumber" class="page">
        <h2>‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç (1-10)</h2><p>‡∏•‡∏≠‡∏á‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏Ñ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏¥! üé≤</p><div id="number-tracker"></div>
        <input type="number" id="guessInput" min="1" max="10" /><div id="gameMessage"></div>
        <div class="buttons"><button type="button" onclick="checkGuess()">‡∏ó‡∏≤‡∏¢!</button><button type="button" class="back-game-menu-btn" onclick="showPage('page7')">‡∏Å‡∏•‡∏±‡∏ö</button></div>
    </div>

    <div id="gameCardShuffle" class="page">
        <h2>‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à üÉè</h2><p>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏û‡πà‡∏´‡∏≤‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏ô 3 ‡πÉ‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏à‡∏≠! ‚ô•Ô∏è</p>
        <div id="cardContainer" style="display:flex; justify-content:center; gap:20px; margin: 25px 0;"></div>
        <div id="puzzleMessage"></div>
        <div class="buttons"><button type="button" onclick="startCardShuffleGame()">‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</button><button type="button" class="back-game-menu-btn" onclick="showPage('page7')">‡∏Å‡∏•‡∏±‡∏ö</button></div>
    </div>

    <div id="gameGacha" class="page">
        <h2>‡∏Å‡∏≤‡∏ä‡∏≤‡∏î‡∏≤‡∏ß 5 ‚≠ê</h2><p>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏î‡∏≤‡∏ß ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏û‡∏¥‡πÄ‡∏®‡∏©!</p><div id="gacha-display">‚ùì</div>
        <div id="gachaResult"></div>
        <div class="buttons"><button type="button" onclick="startGacha()">‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°</button><button type="button" class="back-game-menu-btn" onclick="showPage('page7')">‡∏Å‡∏•‡∏±‡∏ö</button></div>
    </div>
    
    <div id="gameShootHearts" class="page">
        <h2>‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á üíò</h2><p>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '‡∏¢‡∏¥‡∏á' ‡∏Ñ‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏û‡∏•‡∏±‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏•‡πà‡∏≠‡∏¢!</p>
        <div style="position: relative; margin: 20px auto; width: 320px; height: 280px; background: #ffe4ef; border-radius: 25px; box-shadow: 0 0 15px #ffb6c1;">
          <div id="hoop" style="position: absolute; width: 100px; height: 20px; background: #ff69b4; border-radius: 10px; top: 80px; left: 50%; transform: translateX(-50%);"></div>
          <div id="heart" style="position: absolute; font-size: 40px; color: red; top: 220px; left: 50%; transform: translateX(-50%); line-height: 1;">‚ù§Ô∏è</div>
        </div>
        <p id="shootMessage"></p>
        <div class="buttons"><button type="button" id="shootBtn">‚ù§Ô∏è ‡∏¢‡∏¥‡∏á!</button><button type="button" class="back-game-menu-btn" onclick="showPage('page7')">‡∏Å‡∏•‡∏±‡∏ö</button></div>
    </div>

    <div id="lightboxOverlay">
        <button id="lightboxPrevBtn" class="slide-btn" type="button">&#10094;</button>
        <img id="lightboxImage" src="" alt="‡∏Ç‡∏¢‡∏≤‡∏¢‡∏£‡∏π‡∏õ" />
        <button id="lightboxNextBtn" class="slide-btn" type="button">&#10095;</button>
    </div>
    <div id="toast"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    
    // ==========================================================
    // ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (CONFIG & STATE)
    // ==========================================================
    const CONFIG = {
        password: "0909",
        anniversaryDate: "2024-09-09T00:00:00",
    };

    const CATEGORY_NAMES = {
        best: "‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÅ‡∏ó‡∏ô‡πÉ‡∏à",
        funny: "‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô",
        secret: "‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤",
        love: "‡∏°‡∏µ‡∏°‡∏ï‡∏•‡∏Å‡πÜ"
    };

    let state = {
        currentPageId: 'page0',
        currentSlideIndex: 0,
        unlocked: { best: false, funny: false, secret: false, love: false, letter: false },
        gachaPullCount: 0
    };

    let game_state = {};
    let currentGallery = [];
    let currentGalleryIndex = 0;
    
    // ==========================================================
    // ‡∏™‡πà‡∏ß‡∏ô DOM Elements
    // ==========================================================
    const elements = {
        passwordInput: document.getElementById('password'),
        errorMsg: document.getElementById('error'),
        slideShowContainer: document.getElementById('slideShow'),
        slideCounter: document.getElementById('slideCounter'),
        progressBarInner: document.getElementById('progressBarInner'),
        lightboxOverlay: document.getElementById('lightboxOverlay'),
        lightboxImage: document.getElementById('lightboxImage'),
        toast: document.getElementById('toast'),
        years: document.getElementById('years'),
        months: document.getElementById('months'),
        days: document.getElementById('days'),
        hours: document.getElementById('hours'),
        minutes: document.getElementById('minutes'),
        seconds: document.getElementById('seconds'),
        lightboxPrevBtn: document.getElementById('lightboxPrevBtn'),
        lightboxNextBtn: document.getElementById('lightboxNextBtn'),
        shootBtn: document.getElementById('shootBtn'),
        heart: document.getElementById('heart'),
        hoop: document.getElementById('hoop'),
        shootMessage: document.getElementById('shootMessage'),
    };

    // ==========================================================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ (CORE APP FUNCTIONS)
    // ==========================================================
    function loadState() {
        const savedState = JSON.parse(localStorage.getItem('anniversaryGameState')); 
        if (savedState) { 
            state = { ...state, ...savedState };
            state.unlocked = { ...state.unlocked, ...savedState.unlocked };
        } 
    }
    
    function saveState() {
        localStorage.setItem('anniversaryGameState', JSON.stringify(state));
    }

    window.showPage = (id) => {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        const newPage = document.getElementById(id);
        if (newPage) {
            newPage.classList.add('active');
            state.currentPageId = id;
            onPageLoad(id);
        }
    };

    function onPageLoad(id) {
        if (id === 'page1') updateSlideShow();
        if (id === 'page2') updateCategoryLocks();
        const photoPageMap = { page3: 'best', page4: 'funny', page5: 'secret', page6: 'love' };
        if (photoPageMap[id]) loadPhotos(photoPageMap[id]);
    }
    
    window.showGame = (gameId) => {
        showPage(gameId);
        const gameMap = {
            gameGuessNumber: startGuessNumberGame,
            gameCardShuffle: startCardShuffleGame,
            gameGacha: startGacha,
            gameShootHearts: startShootHeartGame,
        };
        if(gameMap[gameId]) gameMap[gameId]();
    }

    let cPressCount = 0;
    window.handleNumpad = (value) => {
        if (value === 'C') {
            elements.passwordInput.value = '';
            cPressCount++;
            if (cPressCount >= 5) {
                Object.keys(state.unlocked).forEach(key => { state.unlocked[key] = false; });
                state.gachaPullCount = 0;
                saveState();
                showToast("‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!");
                cPressCount = 0;
            }
        } else {
            cPressCount = 0;
            if (value === '‚Üê') {
                elements.passwordInput.value = elements.passwordInput.value.slice(0, -1);
            } else if (elements.passwordInput.value.length < 4) {
                elements.passwordInput.value += value;
            }
        }
    }

    window.checkPassword = () => {
        if (elements.passwordInput.value === CONFIG.password) {
            showPage("page1");
            elements.errorMsg.textContent = "";
            elements.passwordInput.value = "";
        } else {
            elements.errorMsg.textContent = "‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!";
        }
    };
    
    function unlockCategory(cat) {
        if (!state.unlocked[cat]) {
            state.unlocked[cat] = true;
            saveState();
            const displayName = CATEGORY_NAMES[cat] || cat;
            showToast(`üéâ ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ '${displayName}' ‡πÅ‡∏•‡πâ‡∏ß!`);
            setTimeout(() => showPage("page2"), 500);
        }
    }

    // ==========================================================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô UI (UI FUNCTIONS)
    // ==========================================================
    function showToast(message) {
        elements.toast.textContent = message;
        elements.toast.classList.add('show');
        setTimeout(() => {
            elements.toast.classList.remove('show');
        }, 3000);
    }

    function setupSlideshow() {
        elements.slideShowContainer.innerHTML = WEBSITE_DATA.slides.map((s, i) => `<img src="${s.src}" alt="${s.alt}" class="${i === 0 ? 'active' : ''}" />`).join('');
        updateSlideShow();
    }

    window.changeSlide = (dir) => {
        state.currentSlideIndex = (state.currentSlideIndex + dir + WEBSITE_DATA.slides.length) % WEBSITE_DATA.slides.length;
        updateSlideShow();
    };

    function updateSlideShow() {
        const slideImages = elements.slideShowContainer.querySelectorAll('img');
        slideImages.forEach((img, i) => {
            img.classList.toggle("active", i === state.currentSlideIndex);
        });
        const total = WEBSITE_DATA.slides.length;
        elements.slideCounter.textContent = `‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà ${state.currentSlideIndex + 1} / ${total}`;
        elements.progressBarInner.style.width = `${((state.currentSlideIndex + 1) / total) * 100}%`;
    }

    function updateCategoryLocks() {
        const allUnlocked = state.unlocked.best && state.unlocked.funny && state.unlocked.secret && state.unlocked.love;
        if (allUnlocked && !state.unlocked.letter) {
            state.unlocked.letter = true;
            saveState();
        }
        document.querySelectorAll("#categoryMenu .menu-card[data-category]").forEach(card => {
            const cat = card.dataset.category;
            const pageMap = { best: 'page3', funny: 'page4', secret: 'page5', love: 'page6', letter: 'page8' };
            if (cat && state.unlocked[cat]) {
                card.classList.remove("locked");
                card.querySelector("small").textContent = "üîì ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß";
                card.onclick = () => showPage(pageMap[cat]);
            } else if (cat) {
                card.classList.add("locked");
                if (cat === 'letter') {
                  card.querySelector("small").textContent = "üîí ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô";
                } else {
                  card.querySelector("small").textContent = "üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô";
                }
                card.onclick = null;
            }
        });
    }
    
    function loadPhotos(category) {
        const containerId = `${category}Grid`;
        const container = document.getElementById(containerId);
        container.innerHTML = "";
        if (!state.unlocked[category]) {
            container.innerHTML = "<p>üîí ‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¢‡∏π‡πà!</p>";
            return;
        }
        WEBSITE_DATA.photos[category].forEach((url, i) => {
            const img = document.createElement('img');
            img.src = url;
            Object.assign(img.style, { borderRadius: "18px", cursor: "pointer", width: "140px", height: "140px", objectFit: "cover", boxShadow: "0 0 15px var(--shadow-color-dark)" });
            img.onclick = () => openLightbox(category, i);
            container.appendChild(img);
        });
    }
    
    function updateGalleryImage() {
        elements.lightboxImage.src = currentGallery[currentGalleryIndex];
    }

    function openLightbox(category, index) {
        currentGallery = WEBSITE_DATA.photos[category];
        currentGalleryIndex = index;
        updateGalleryImage();
        elements.lightboxOverlay.style.display = "flex";
    }

    function updateAnniversaryCounter() {
        const startDate = new Date(CONFIG.anniversaryDate);
        const now = new Date();
        let years = now.getFullYear() - startDate.getFullYear();
        let months = now.getMonth() - startDate.getMonth();
        let days = now.getDate() - startDate.getDate();
        let hours = now.getHours() - startDate.getHours();
        let minutes = now.getMinutes() - startDate.getMinutes();
        let seconds = now.getSeconds() - startDate.getSeconds();
        if (seconds < 0) { seconds += 60; minutes--; }
        if (minutes < 0) { minutes += 60; hours--; }
        if (hours < 0) { hours += 24; days--; }
        if (days < 0) { months--; const daysInLastMonth = new Date(now.getFullYear(), now.getMonth(), 0).getDate(); days += daysInLastMonth; }
        if (months < 0) { months += 12; years--; }
        elements.years.textContent = years;
        elements.months.textContent = months;
        elements.days.textContent = days;
        elements.hours.textContent = String(hours).padStart(2, '0');
        elements.minutes.textContent = String(minutes).padStart(2, '0');
        elements.seconds.textContent = String(seconds).padStart(2, '0');
    }

    // ==========================================================
    // ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏° (GAMES)
    // ==========================================================
    function startGuessNumberGame() {
        game_state.targetNumber = Math.floor(Math.random() * 10) + 1;
        const tracker = document.getElementById('number-tracker');
        tracker.innerHTML = '';
        for (let i = 1; i <= 10; i++) {
            tracker.innerHTML += `<div class="tracker-num" data-num="${i}">${i}</div>`;
        }
        document.getElementById("gameMessage").textContent = "";
        document.getElementById("guessInput").value = "";
    }
    window.checkGuess = () => {
        const input = document.getElementById("guessInput");
        const message = document.getElementById("gameMessage");
        const val = parseInt(input.value);
        if (!val || val < 1 || val > 10) { message.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 1-10 ‡∏ô‡∏∞!"; return; }
        const guessedNumEl = document.querySelector(`.tracker-num[data-num="${val}"]`);
        if (val === game_state.targetNumber) {
            message.textContent = `üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ${CATEGORY_NAMES['best']} ‡πÅ‡∏•‡πâ‡∏ß!`;
            if(guessedNumEl) guessedNumEl.classList.add('correct');
            unlockCategory("best");
        } else {
            message.textContent = "‡∏ú‡∏¥‡∏î‡∏ô‡∏∞ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á!";
            if(guessedNumEl) guessedNumEl.classList.add('guessed');
        }
    };

    function startCardShuffleGame() {
        game_state.cardsPicked = false;
        const container = document.getElementById("cardContainer");
        container.innerHTML = [0,1,2].map(() => `<div class="card" style="width:90px; height:120px; background:#ffe1e9; border-radius:16px; cursor:pointer; box-shadow: 0 0 15px #ffb6c1; display:flex; justify-content:center; align-items:center; font-size: 2rem;">?</div>`).join('');
        const cards = container.querySelectorAll(".card");
        cards.forEach((card, i) => card.onclick = () => pickCard(i));
        const emojis = ["‚ô•Ô∏è", "üçÄ", "‚≠ê"];
        let shuffled = emojis.sort(() => Math.random() - 0.5);
        game_state.heartIndex = shuffled.findIndex(e => e === "‚ô•Ô∏è");
        cards.forEach((card, i) => card.setAttribute("data-emoji", shuffled[i]));
        document.getElementById("puzzleMessage").textContent = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏•‡∏¢~ üíò";
    }
    window.pickCard = (i) => {
        if (game_state.cardsPicked) return;
        game_state.cardsPicked = true;
        const message = document.getElementById("puzzleMessage");
        const cards = document.getElementById("cardContainer").querySelectorAll(".card");
        cards.forEach(card => { card.textContent = card.getAttribute("data-emoji"); card.style.pointerEvents = "none"; });
        if (i === game_state.heartIndex) {
            message.textContent = `üéâ ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ${CATEGORY_NAMES['funny']} ‡πÅ‡∏•‡πâ‡∏ß!`;
            unlockCategory("funny");
        } else {
            message.textContent = "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ô‡πâ‡∏≤~ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞ üí¶";
        }
    };
    
    function startGacha() {
        const gachaPool = [ { emoji: 'üç§', stars: 1 }, { emoji: 'üê∞', stars: 2 }, { emoji: 'üêπ', stars: 3 }, { emoji: '‚ú®', stars: 4 }, { emoji: 'ü©µ', stars: 5 } ];
        const display = document.getElementById("gacha-display");
        const resultDiv = document.getElementById("gachaResult");
        state.gachaPullCount = (state.gachaPullCount || 0) + 1;
        saveState();
        resultDiv.textContent = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°... (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${state.gachaPullCount})`;
        display.textContent = "‚ùì";
        let spinCount = 0;
        const spinInterval = setInterval(() => {
            display.textContent = gachaPool[Math.floor(Math.random() * gachaPool.length)].emoji;
            spinCount++;
            if (spinCount >= 15) {
                clearInterval(spinInterval);
                let result;
                if (state.gachaPullCount >= 10) {
                    result = gachaPool.find(item => item.stars === 5); 
                    state.gachaPullCount = 0; 
                    saveState();
                } else {
                    result = gachaPool[Math.floor(Math.random() * gachaPool.length)];
                }
                display.textContent = result.emoji;
                let starText = "‚≠ê".repeat(result.stars);
                resultDiv.textContent = `‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ '${result.emoji}' ‡∏£‡∏∞‡∏î‡∏±‡∏ö ${result.stars} ‡∏î‡∏≤‡∏ß! ${starText}`;
                if (result.stars === 5) {
                    resultDiv.textContent += ` üíñ ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î ${CATEGORY_NAMES['secret']} ‡πÅ‡∏•‡πâ‡∏ß!`;
                    unlockCategory("secret");
                }
            }
        }, 120);
    }
    
    function startShootHeartGame() {
        game_state.shootGameScore = 0;
        game_state.isShooting = false;
        elements.shootMessage.textContent = `‡∏¢‡∏¥‡∏á‡πÉ‡∏´‡πâ‡∏•‡∏á 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á! (${game_state.shootGameScore}/5)`;
        let hoopDirection = 1;
        if (game_state.hoopInterval) clearInterval(game_state.hoopInterval);
        elements.hoop.style.left = "160px";
        game_state.hoopInterval = setInterval(() => {
            let left = parseFloat(elements.hoop.style.left);
            left += hoopDirection * 2;
            if (left > 220 || left < 100) hoopDirection *= -1;
            elements.hoop.style.left = `${left}px`;
        }, 30);
    }
    function shootHeart(power) {
        if(game_state.isShooting) return;
        game_state.isShooting = true;
        let velocityY = -power;
        let posY = parseFloat(elements.heart.style.top);
        const animate = () => {
            posY += velocityY;
            velocityY += 0.3;
            elements.heart.style.top = `${posY}px`;
            const heartBox = elements.heart.getBoundingClientRect();
            const hoopBox = elements.hoop.getBoundingClientRect();
            const heartCenterX = heartBox.left + heartBox.width / 2;
            const heartCenterY = heartBox.top + heartBox.height / 2;
            const isHorizontallyAligned = heartCenterX > hoopBox.left && heartCenterX < hoopBox.right;
            const isVerticallyAligned = heartCenterY > hoopBox.top && heartCenterY < hoopBox.bottom;
            if (isHorizontallyAligned && isVerticallyAligned && velocityY > 0) {
                game_state.shootGameScore++;
                elements.shootMessage.textContent = `‚úÖ ‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á‡πÅ‡∏•‡πâ‡∏ß! (${game_state.shootGameScore}/5)`;
                if (game_state.shootGameScore >= 5) {
                    unlockCategory("love");
                    elements.shootMessage.textContent += " ‚ù§Ô∏è ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!";
                }
                resetHeart();
                return;
            }
            if (posY > 300) {
                elements.shootMessage.textContent = "‚ùå ‡∏û‡∏•‡∏≤‡∏î! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞";
                resetHeart();
                return;
            }
            requestAnimationFrame(animate);
        };
        requestAnimationFrame(animate);
    }
    function resetHeart() {
        setTimeout(() => {
            elements.heart.style.top = "220px";
            game_state.isShooting = false;
        }, 500);
    }
    elements.shootBtn.onmousedown = elements.shootBtn.ontouchstart = (e) => {
        e.preventDefault();
        if(game_state.isShooting) return;
        game_state.chargeStartTime = Date.now();
        elements.shootBtn.style.transform = 'scale(1.1)';
    };
    elements.shootBtn.onmouseup = elements.shootBtn.ontouchend = (e) => {
        e.preventDefault();
        if(!game_state.chargeStartTime) return;
        const holdTime = Date.now() - game_state.chargeStartTime;
        const power = Math.min(Math.max(holdTime / 80, 5), 12);
        shootHeart(power);
        game_state.chargeStartTime = 0;
        elements.shootBtn.style.transform = 'scale(1)';
    };

    // ==========================================================
    // ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (INITIALIZE)
    // ==========================================================
    loadState();
    setupSlideshow();
    elements.lightboxOverlay.onclick = (event) => { if (event.target === elements.lightboxOverlay) { elements.lightboxOverlay.style.display = "none"; } };
    elements.lightboxPrevBtn.onclick = (event) => { event.stopPropagation(); currentGalleryIndex = (currentGalleryIndex - 1 + currentGallery.length) % currentGallery.length; updateGalleryImage(); };
    elements.lightboxNextBtn.onclick = (event) => { event.stopPropagation(); currentGalleryIndex = (currentGalleryIndex + 1) % currentGallery.length; updateGalleryImage(); };
    setInterval(updateAnniversaryCounter, 1000);
    updateAnniversaryCounter();
    showPage('page0');
});
</script>
</body>
</html>
