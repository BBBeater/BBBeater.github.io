<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Anniversary - Final Version</title>
<link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet" />
<style>
  :root {
    --primary-color: #d43f6f;
    --secondary-color: #f48fb1;
    --light-pink-bg: #fff0f5;
    --gradient-start: #ffd6e8;
    --gradient-end: #fff0f5;
    --border-color: #ffb6c1;
    --shadow-color-light: rgba(244,143,177,0.5);
    --shadow-color-dark: #ffb6c1;
    --text-color: #5e2b45;
    --card-bg: #fff0f8;
  }

  body {
    font-family: 'Itim', cursive;
    background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
    color: var(--text-color);
    margin: 0; padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  button, input, select, textarea {
    font-family: inherit;
  }

  .container {
    width: 95vw;
    max-width: 600px;
    background: white;
    border-radius: 25px;
    box-shadow: 0 0 25px var(--shadow-color-dark);
    padding: 35px 25px 40px;
    text-align: center;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
  }

  .page { transition: opacity 0.4s ease-in-out; }
  .page.hidden { display: none; opacity: 0; }

  h1, h2 { color: var(--primary-color); margin-bottom: 25px; }
  p { font-size: 1.2rem; margin-bottom: 30px; line-height: 1.4; }

  input[type="password"], input[type="number"] {
    font-size: 20px;
    padding: 10px 14px;
    width: 150px;
    border: 2px solid var(--border-color);
    border-radius: 12px;
    text-align: center;
    margin-bottom: 15px;
    letter-spacing: 0.2em;
  }

  button {
    background-color: var(--secondary-color);
    border: none;
    color: white;
    font-size: 18px;
    padding: 12px 28px;
    border-radius: 20px;
    cursor: pointer;
    margin: 0 10px;
    transition: background-color 0.3s ease, transform 0.2s ease;
    box-shadow: 0 4px 10px var(--shadow-color-light);
  }

  button:hover {
    background-color: var(--primary-color);
    transform: translateY(-2px);
  }

  .buttons {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    margin-top: 25px;
    gap: 15px;
  }

  #error { color: var(--primary-color); font-weight: bold; margin-top: 8px; }

  .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; justify-items: center; }
  
  .menu-card { 
    background: var(--card-bg); 
    border-radius: 20px; 
    box-shadow: 0 0 12px var(--shadow-color-dark); 
    cursor: pointer; 
    padding: 15px; 
    width: 140px; 
    height: 120px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease; 
    user-select: none; 
  }

  .menu-card.locked { cursor: default; opacity: 0.6; }
  .menu-card:hover:not(.locked) { transform: scale(1.07); box-shadow: 0 0 20px var(--primary-color); }

  .menu-card .title { 
    font-weight: bold; 
    color: var(--primary-color); 
    font-size: 1.25rem; 
    margin-bottom: 8px;
  }

  #gameMessage, #puzzleMessage { font-weight: bold; color: var(--primary-color); min-height: 28px; margin-top: 15px; transition: color 0.3s ease; }
  .back-game-menu-btn { background: #f8bbd0; color: #a6265a; border-radius: 25px; border: none; padding: 8px 22px; cursor: pointer; font-weight: bold; margin: 0; box-shadow: 0 3px 8px rgba(248,187,208,0.6); transition: background-color 0.3s ease, color 0.3s ease; }
  .back-game-menu-btn:hover { background: var(--primary-color); color: white; }

  #lightboxOverlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(95, 35, 70, 0.9); display: none; justify-content: center; align-items: center; z-index: 1000; }
  #lightboxOverlay img { max-width: 90vw; max-height: 90vh; border-radius: 20px; box-shadow: 0 0 25px var(--shadow-color-dark); cursor: zoom-out; user-select: none; }

  #slideShow { position: relative; width: 100%; max-width: 420px; height: 320px; margin: 0 auto 20px; border-radius: 25px; overflow: hidden; box-shadow: 0 0 15px var(--shadow-color-dark); }
  #slideShow img { width: 100%; height: 320px; object-fit: cover; position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 0.6s ease; border-radius: 25px; user-select: none; }
  #slideShow img.active { opacity: 1; position: relative; }
  
  .slide-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255, 255, 255, 0.5); backdrop-filter: blur(2px); border: 1px solid rgba(255, 255, 255, 0.2); color: var(--primary-color); font-size: 24px; width: 48px; height: 48px; padding: 0; display: flex; justify-content: center; align-items: center; border-radius: 50%; cursor: pointer; user-select: none; transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease; z-index: 10; }
  .slide-btn:hover { background: var(--primary-color); color: white; transform: translateY(-50%); }
  #prevBtn { left: 15px; }
  #nextBtn { right: 15px; }

  #slideCounter { margin: 0 auto 10px; font-weight: bold; color: var(--primary-color); }
  #progressBar { width: 100%; max-width: 420px; height: 6px; background: #ffe4ef; border-radius: 6px; margin: 0 auto 30px; overflow: hidden; }
  #progressBarInner { height: 100%; width: 0%; background: var(--primary-color); border-radius: 6px; transition: width 0.4s ease; }
  
  #toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background-color: var(--primary-color); color: white; padding: 16px 24px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2000; font-size: 1.1rem; font-weight: bold; transition: top 0.5s ease-in-out; }
  #toast.show { top: 20px; }
  
  /* --- NEW: Time Counter Style --- */
  .time-display { background: var(--card-bg); border-radius: 20px; padding: 25px; margin: 20px auto; max-width: 400px; }
  .time-segment { margin: 10px 0; }
  .time-value { font-size: 2.5rem; font-weight: bold; color: var(--primary-color); }
  .time-label { font-size: 1.1rem; color: var(--text-color); }

  @keyframes shake { 0%, 100% { transform: translateX(0); } 20% { transform: translateX(-8px); } 40% { transform: translateX(8px); } 60% { transform: translateX(-6px); } 80% { transform: translateX(6px); } }
  .shake { animation: shake 0.4s ease; }

  @keyframes flashRed { 0%, 100% { color: var(--primary-color); } 50% { color: #ff4d6d; } }
  .flashRed { animation: flashRed 0.6s ease; }
  
  #gacha-display { width: 100%; max-width: 200px; height: 100px; background: #fff9fb; border: 3px solid var(--border-color); border-radius: 20px; margin: 20px auto; display: flex; justify-content: center; align-items: center; font-size: 4rem; color: var(--primary-color); box-shadow: inset 0 0 10px rgba(0,0,0,0.05); }

  .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 240px; margin: 20px auto 0; }
  .numpad-btn { padding: 0; width: 60px; height: 60px; border-radius: 50%; font-size: 1.5rem; margin: 0; }
  .numpad-btn.special { background-color: #f8bbd0; color: #a6265a; }

  #number-tracker { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; max-width: 320px; margin: 20px auto; }
  .tracker-num { width: 40px; height: 40px; background: #fff2f7; border: 2px solid var(--border-color); border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; transition: background-color 0.3s, opacity 0.3s; }
  .tracker-num.guessed { background-color: #e0e0e0; color: #9e9e9e; border-color: #ccc; }
  .tracker-num.correct { background-color: #a5d6a7; color: #1b5e20; border-color: #388e3c; }

  @media (max-width: 480px) {
    .container { padding: 25px 15px 30px; }
    #slideShow, #slideShow img { height: 280px; }
    .menu-card { width: 120px; height: 100px; }
    .menu-card .title { font-size: 1.1rem; }
    input[type="password"], input[type="number"] { width: 120px; font-size: 18px; }
    .slide-btn { width: 40px; height: 40px; font-size: 20px; }
    #prevBtn { left: 10px; }
    #nextBtn { right: 10px; }
    .numpad-btn { width: 50px; height: 50px; font-size: 1.2rem; }
    .tracker-num { width: 35px; height: 35px; }
    .time-value { font-size: 2rem; }
  }
</style>
</head>
<body>

<div class="container">

  <div id="page0" class="page">
    <h1>üå∏ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö üå∏</h1>
    <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô üíñ</p>
    <input type="password" id="password" readonly placeholder="****" />
    <div class="numpad">
        <button type="button" class="numpad-btn" onclick="handleNumpad('1')">1</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('2')">2</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('3')">3</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('4')">4</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('5')">5</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('6')">6</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('7')">7</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('8')">8</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('9')">9</button>
        <button type="button" class="numpad-btn special" onclick="handleNumpad('C')">C</button>
        <button type="button" class="numpad-btn" onclick="handleNumpad('0')">0</button>
        <button type="button" class="numpad-btn special" onclick="handleNumpad('‚Üê')">‚Üê</button>
    </div>
    <div class="buttons">
      <button type="button" onclick="checkPassword()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</button>
    </div>
    <p id="error"></p>
  </div>

  <div id="page1" class="page hidden">
    <h1>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏ô‡∏∞‡∏∞ üíï</h1>
    <div id="slideShow"></div>
    <div id="slideCounter"></div>
    <div id="progressBar"><div id="progressBarInner"></div></div>
    <button id="prevBtn" class="slide-btn" type="button">&#10094;</button>
    <button id="nextBtn" class="slide-btn" type="button">&#10095;</button>
    <div class="buttons">
      <button type="button" onclick="showPage('page0')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <button type="button" onclick="showPage('page2')">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
    </div>
  </div>

  <div id="page2" class="page hidden">
    <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π üíå</h2>
    <div class="menu-grid" id="categoryMenu">
      <div class="menu-card" data-category="best"><div class="title">‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÅ‡∏ó‡∏ô‡πÉ‡∏à üéÅ</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" data-category="funny"><div class="title">‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô üçï</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" data-category="secret"><div class="title">‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üë©‚Äç‚ù§Ô∏è‚Äçüë®</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" data-category="love"><div class="title">‡∏°‡∏µ‡∏°‡∏ï‡∏•‡∏Å‡πÜ üòÇ</div><small>üîí ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" data-category="letter"><div class="title">‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏•‡∏±‡∏ö</div><small>üîí ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô</small></div>
      <div class="menu-card" onclick="showPage('page9')"><div class="title">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ ‚è±Ô∏è</div><small>‚ù§Ô∏è ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô</small></div>
    </div>
    <div class="buttons">
      <button type="button" onclick="showPage('page1')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <button type="button" onclick="showPage('page7')">‡πÑ‡∏õ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ üîì</button>
    </div>
  </div>

  <div id="page3" class="page hidden"><h2>‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÅ‡∏ó‡∏ô‡πÉ‡∏à üéÅ</h2><div class="menu-grid" id="bestGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
  <div id="page4" class="page hidden"><h2>‡∏£‡∏π‡∏õ‡∏ï‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô üçï</h2><div class="menu-grid" id="funnyGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
  <div id="page5" class="page hidden"><h2>‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üë©‚Äç‚ù§Ô∏è‚Äçüë®</h2><div class="menu-grid" id="secretGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
  <div id="page6" class="page hidden"><h2>‡∏°‡∏µ‡∏°‡∏ï‡∏•‡∏Å‡πÜ üòÇ</h2><div class="menu-grid" id="loveGrid"></div><div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div></div>
  
  <div id="page8" class="page hidden">
      <h2>‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ô‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤ üíå</h2>
      <p style="text-align: left; background: #fff9fb; padding: 20px; border-radius: 15px; border: 1px solid var(--border-color);">
        ‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏∞! ‡πÑ‡∏°‡πà‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏¢‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡πÄ‡∏¢‡∏≠‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡∏µ‡πâ...<br><br>
        ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡∏Ñ‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏•‡∏¢ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏∞ ‡∏£‡∏±‡∏Å‡∏°‡∏≤‡∏Å‡πÜ‡πÄ‡∏•‡∏¢‡∏Ñ‡πâ‡∏≤‡∏ö üíñ
        <br><br>
        ‡∏à‡∏≤‡∏Å... ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å
      </p>
      <div class="buttons"><button onclick="showPage('page2')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏°‡∏ô‡∏π</button></div>
  </div>

  <div id="page9" class="page hidden">
    <h2>‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô üóìÔ∏è</h2>
    <div class="time-display">
      <div class="time-segment">
        <span class="time-value" id="years">0</span><span class="time-label"> ‡∏õ‡∏µ</span>
        <span class="time-value" id="months">0</span><span class="time-label"> ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
        <span class="time-value" id="days">0</span><span class="time-label"> ‡∏ß‡∏±‡∏ô</span>
      </div>
      <div class="time-segment">
        <span class="time-value" id="hours">00</span><span class="time-label">:</span>
        <span class="time-value" id="minutes">00</span><span class="time-label">:</span>
        <span class="time-value" id="seconds">00</span>
      </div>
    </div>
    <div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div>
  </div>

  <div id="page7" class="page hidden">
    <h2>üéÆ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ! üéÆ</h2>
    <div class="menu-grid" id="gameMenuGrid">
      <div class="menu-card" data-game="guessNumber"><div class="title">‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç üé≤</div></div>
      <div class="menu-card" data-game="cardShuffle"><div class="title">‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à üÉè</div></div>
      <div class="menu-card" data-game="gachaPull"><div class="title">‡∏Å‡∏≤‡∏ä‡∏≤‡∏î‡∏≤‡∏ß 5 ‚≠ê</div></div>
      <div class="menu-card" data-game="shootHearts"><div class="title">‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á üíò</div></div>
    </div>
    <div class="buttons"><button onclick="showPage('page2')">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button></div>
  </div>

  <div id="gameGuessNumber" class="page hidden">
    <h2>‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç (1-10)</h2><p>‡∏•‡∏≠‡∏á‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏Ñ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏¥! üé≤</p>
    <div id="number-tracker"></div>
    <input type="number" id="guessInput" min="1" max="10" />
    <div id="gameMessage"></div>
    <div class="buttons"><button type="button" onclick="checkGuess()">‡∏ó‡∏≤‡∏¢!</button><button type="button" class="back-game-menu-btn" onclick="backToGameMenu('gameGuessNumber')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button></div>
  </div>

  <div id="gameCardShuffle" class="page hidden">
    <h2>‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à üÉè</h2><p>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏û‡πà‡∏´‡∏≤‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏ô 3 ‡πÉ‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏à‡∏≠! ‚ô•Ô∏è</p>
    <div id="cardContainer" style="display:flex; justify-content:center; gap:20px; margin: 25px 0;">
      <div class="card" style="width:90px; height:120px; background:#ffe1e9; border-radius:16px; cursor:pointer; box-shadow: 0 0 15px #ffb6c1; display:flex; justify-content:center; align-items:center; font-size: 2rem;" onclick="pickCard(0)">?</div>
      <div class="card" style="width:90px; height:120px; background:#ffe1e9; border-radius:16px; cursor:pointer; box-shadow: 0 0 15px #ffb6c1; display:flex; justify-content:center; align-items:center; font-size: 2rem;" onclick="pickCard(1)">?</div>
      <div class="card" style="width:90px; height:120px; background:#ffe1e9; border-radius:16px; cursor:pointer; box-shadow: 0 0 15px #ffb6c1; display:flex; justify-content:center; align-items:center; font-size: 2rem;" onclick="pickCard(2)">?</div>
    </div>
    <div id="puzzleMessage"></div>
    <div class="buttons"><button type="button" onclick="resetCardGame()">‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</button><button type="button" class="back-game-menu-btn" onclick="backToGameMenu('gameCardShuffle')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button></div>
  </div>

  <div id="gameGacha" class="page hidden">
    <h2>‡∏Å‡∏≤‡∏ä‡∏≤‡∏î‡∏≤‡∏ß 5 ‚≠ê</h2><p>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏î‡∏≤‡∏ß ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏û‡∏¥‡πÄ‡∏®‡∏©!</p>
    <div id="gacha-display">üé∞</div>
    <div id="gachaResult" style="margin-top: 10px; font-weight: bold; color: var(--primary-color); min-height: 28px;"></div>
    <div class="buttons"><button type="button" onclick="startGacha()">‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°</button><button type="button" class="back-game-menu-btn" onclick="backToGameMenu('gameGacha')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button></div>
  </div>
  
  <div id="gameShootHearts" class="page hidden">
    <h2>‡∏¢‡∏¥‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á üíò</h2>
    <p>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '‡∏¢‡∏¥‡∏á' ‡∏Ñ‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏û‡∏•‡∏±‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏•‡πà‡∏≠‡∏¢!</p>
    <div style="position: relative; margin: 20px auto; width: 320px; height: 280px; background: #ffe4ef; border-radius: 25px; box-shadow: 0 0 15px #ffb6c1;">
      <div id="hoop" style="position: absolute; width: 100px; height: 20px; background: #ff69b4; border-radius: 10px; top: 80px; left: 50%; transform: translateX(-50%);"></div>
      <div id="heart" style="position: absolute; width: 40px; height: 40px; background: red; top: 220px; left: 50%; transform: translateX(-50%); border-radius: 50%; box-shadow: 0 0 10px #ff8ab8;"></div>
    </div>
    <p id="shootMessage" style="margin-top: 18px; font-weight: bold; color: var(--primary-color); min-height: 28px;"></p>
    <div class="buttons">
      <button type="button" id="shootBtn">‚ù§Ô∏è ‡∏¢‡∏¥‡∏á!</button>
      <button type="button" class="back-game-menu-btn" onclick="backToGameMenu('gameShootHearts')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡∏°</button>
    </div>
  </div>

  <div id="lightboxOverlay"><img id="lightboxImage" src="" alt="‡∏Ç‡∏¢‡∏≤‡∏¢‡∏£‡∏π‡∏õ" /></div>
  <div id="toast"></div>

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {

  
const CONFIG = {
  password: "0000",
  anniversaryDate: "2024-09-09T00:00:00", // NEW: Anniversary start date

  slides: [
    { src: "https://i.postimg.cc/0N49WgJF/LINE-ALBUM-250819-8.jpg", alt: "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°" },
    { src: "URL_‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå", alt: "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå" },
    { src: "URL_‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°", alt: "‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°" },
    { src: "URL_‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô", alt: "‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô" },
  ],

  photos: {
    best: ["https://i.postimg.cc/DwYmJCPf/1.jpg","https://i.postimg.cc/1t1mwbnS/10.jpg","https://i.postimg.cc/W4kpDs4S/11.jpg","https://i.postimg.cc/26dzwThZ/12.jpg","https://i.postimg.cc/x8YdDBn5/2.jpg","https://i.postimg.cc/fWjLjWfr/3.jpg","https://i.postimg.cc/wMVj6FBp/4.jpg","https://i.postimg.cc/ZR6qQJt0/5.jpg","https://i.postimg.cc/65WQHsH5/6.jpg","https://i.postimg.cc/15v32WT0/7.jpg","https://i.postimg.cc/Gm9mCFwW/8.jpg","https://i.postimg.cc/CxtLLRwz/9.jpg" ],
    funny: ["https://i.postimg.cc/Ss4XknGc/1.jpg","https://i.postimg.cc/j2dLnBm5/2.jpg","https://i.postimg.cc/QC4VQ0Zq/3.jpg","https://i.postimg.cc/mZ8cW21F/4.jpg","https://i.postimg.cc/3JNk852f/5.jpg","https://i.postimg.cc/Pr7PN34X/6.jpg","https://i.postimg.cc/3xDWGXSg/7.jpg","https://i.postimg.cc/8CQcm79x/8.jpg"],
    secret: ["https://i.postimg.cc/0N49WgJF/LINE-ALBUM-250819-8.jpg","https://i.postimg.cc/VLFPVdJ3/2.jpg","https://i.postimg.cc/GhR1KkmF/3.jpg","https://i.postimg.cc/BZH02h4Z/4.jpg","https://i.postimg.cc/rwF2XMWz/5.jpg","https://i.postimg.cc/L8CKmwBD/6.jpg","https://i.postimg.cc/7L5vh9Kk/7.jpg","https://i.postimg.cc/fbpG9dP0/8.jpg","https://i.postimg.cc/j5fGQ5V3/9.jpg","https://i.postimg.cc/0jqhtsPk/10.jpg"],
    love: ["https://i.postimg.cc/BQFXL5w2/1.jpg","https://i.postimg.cc/Z5FnjbmR/2.jpg","https://i.postimg.cc/htqh9JH6/3.jpg","https://i.postimg.cc/YSr9s52x/4.jpg","https://i.postimg.cc/nL3zb3Cf/5.jpg","https://i.postimg.cc/fLkbwY9t/6.jpg","https://i.postimg.cc/RF8Zqq7P/7.jpg","https://i.postimg.cc/x8zTmYg9/8.jpg"],
  },
};
let state = { currentSlideIndex: 0, unlocked: { best: false, funny: false, secret: false, love: false, letter: false }, };
let cPressCount = 0;

function saveState() { localStorage.setItem('anniversaryGameState', JSON.stringify(state.unlocked)); }
  function loadState() { const savedState = localStorage.getItem('anniversaryGameState'); if (savedState) { state.unlocked = JSON.parse(savedState); } }
  const elements = { 
    passwordInput: document.getElementById('password'), errorMsg: document.getElementById('error'), 
    slideShowContainer: document.getElementById('slideShow'), slideCounter: document.getElementById('slideCounter'), 
    progressBarInner: document.getElementById('progressBarInner'), lightboxOverlay: document.getElementById('lightboxOverlay'), 
    lightboxImage: document.getElementById('lightboxImage'), toast: document.getElementById('toast'),
    // NEW: Time counter elements
    years: document.getElementById('years'), months: document.getElementById('months'), days: document.getElementById('days'),
    hours: document.getElementById('hours'), minutes: document.getElementById('minutes'), seconds: document.getElementById('seconds')
  };
  let currentPageId = null;
  window.showPage = (id) => { const newPage = document.getElementById(id); const oldPage = currentPageId ? document.getElementById(currentPageId) : null; if (oldPage && oldPage !== newPage) { oldPage.style.opacity = 0; setTimeout(() => { oldPage.classList.add('hidden'); if (newPage) { newPage.classList.remove('hidden'); setTimeout(() => newPage.style.opacity = 1, 50); } currentPageId = id; onPageLoad(id); }, 400); } else if (newPage) { document.querySelectorAll('.page').forEach(p => p.classList.add('hidden')); newPage.classList.remove('hidden'); setTimeout(() => newPage.style.opacity = 1, 50); currentPageId = id; onPageLoad(id); } };
  function onPageLoad(id) { if (id === 'page1') updateSlideShow(); if (id === 'page2') updateCategoryLocks(); const pageMap = { page3: { category: "best", gridId: "bestGrid" }, page4: { category: "funny", gridId: "funnyGrid" }, page5: { category: "secret", gridId: "secretGrid" }, page6: { category: "love", gridId: "loveGrid" }, }; if (pageMap[id]) { loadPhotos(pageMap[id].category, pageMap[id].gridId); } }
  function showToast(message) { elements.toast.textContent = message; elements.toast.classList.add('show'); setTimeout(() => { elements.toast.classList.remove('show'); }, 3000); }
  
  function resetAllProgress() {
    Object.keys(state.unlocked).forEach(key => { state.unlocked[key] = false; });
    saveState();
  }

  // --- NEW: Real-time counter function ---
  function updateAnniversaryCounter() {
    const startDate = new Date(CONFIG.anniversaryDate);
    const now = new Date();
    
    let years = now.getFullYear() - startDate.getFullYear();
    let months = now.getMonth() - startDate.getMonth();
    let days = now.getDate() - startDate.getDate();
    let hours = now.getHours() - startDate.getHours();
    let minutes = now.getMinutes() - startDate.getMinutes();
    let seconds = now.getSeconds() - startDate.getSeconds();

    if (seconds < 0) { seconds += 60; minutes--; }
    if (minutes < 0) { minutes += 60; hours--; }
    if (hours < 0) { hours += 24; days--; }
    if (days < 0) {
      months--;
      const daysInLastMonth = new Date(now.getFullYear(), now.getMonth(), 0).getDate();
      days += daysInLastMonth;
    }
    if (months < 0) { months += 12; years--; }

    elements.years.textContent = years;
    elements.months.textContent = months;
    elements.days.textContent = days;
    elements.hours.textContent = String(hours).padStart(2, '0');
    elements.minutes.textContent = String(minutes).padStart(2, '0');
    elements.seconds.textContent = String(seconds).padStart(2, '0');
  }

  window.handleNumpad = (value) => {
    const pwInput = elements.passwordInput;
    if (value === 'C') {
      pwInput.value = '';
      cPressCount++;
      if (cPressCount >= 5) {
        resetAllProgress();
        showToast("‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!");
        cPressCount = 0;
      }
    } else {
      cPressCount = 0;
      if (value === '‚Üê') {
        pwInput.value = pw.value.slice(0, -1);
      } else if (pwInput.value.length < 4) {
        pwInput.value += value;
      }
    }
  }

  window.checkPassword = () => { if (elements.passwordInput.value === CONFIG.password) { showPage("page1"); elements.errorMsg.textContent = ""; elements.passwordInput.value = ""; } else { elements.errorMsg.textContent = "‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞!"; } };
  function loadPhotos(category, containerId) { const container = document.getElementById(containerId); container.innerHTML = ""; if (!state.unlocked[category]) { container.innerHTML = "<p>üîí ‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¢‡∏π‡πà ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞!</p>"; return; } CONFIG.photos[category].forEach((url, i) => { const img = document.createElement("img"); img.src = url; img.alt = `${category} photo ${i+1}`; Object.assign(img.style, { borderRadius: "18px", cursor: "pointer", width: "120px", height: "120px", objectFit: "cover", boxShadow: "0 0 15px var(--shadow-color-dark)"}); img.onclick = () => openLightbox(url); container.appendChild(img); }); }
  function updateCategoryLocks() { const allUnlocked = state.unlocked.best && state.unlocked.funny && state.unlocked.secret && state.unlocked.love; if(allUnlocked && !state.unlocked.letter) { state.unlocked.letter = true; saveState(); } document.querySelectorAll("#categoryMenu .menu-card").forEach(card => { const cat = card.dataset.category; if (cat && state.unlocked[cat]) { card.classList.remove("locked"); card.querySelector("small").textContent = "üîì ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß"; card.style.opacity = "1"; card.onclick = () => { if (cat === "best") showPage("page3"); else if (cat === "funny") showPage("page4"); else if (cat === "secret") showPage("page5"); else if (cat === "love") showPage("page6"); else if (cat === "letter") showPage("page8"); }; } else if (cat) { card.classList.add("locked"); card.style.opacity = "0.6"; card.onclick = null; } }); }
  window.openLightbox = (src) => { elements.lightboxImage.src = src; elements.lightboxOverlay.style.display = "flex"; }
  function setupSlideshow() { elements.slideShowContainer.innerHTML = CONFIG.slides.map((slide, index) => `<img src="${slide.src}" alt="${slide.alt}" class="${index === 0 ? 'active' : ''}" />` ).join(''); elements.slideImages = elements.slideShowContainer.querySelectorAll('img'); }
  function updateSlideShow() { elements.slideImages.forEach((img, i) => { img.classList.toggle("active", i === state.currentSlideIndex); }); const totalSlides = elements.slideImages.length; elements.slideCounter.textContent = `‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà ${state.currentSlideIndex + 1} / ${totalSlides}`; elements.progressBarInner.style.width = `${((state.currentSlideIndex + 1) / totalSlides) * 100}%`; }
  document.getElementById("prevBtn").onclick = () => { state.currentSlideIndex = (state.currentSlideIndex - 1 + elements.slideImages.length) % elements.slideImages.length; updateSlideShow(); };
  document.getElementById("nextBtn").onclick = () => { state.currentSlideIndex = (state.currentSlideIndex + 1) % elements.slideImages.length; updateSlideShow(); };
  function unlockCategory(cat) { if (!state.unlocked[cat]) { state.unlocked[cat] = true; saveState(); showToast(`üéâ ‡∏´‡∏°‡∏ß‡∏î '${cat}' ‡∏ñ‡∏π‡∏Å‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß!`); setTimeout(() => showPage("page2"), 500); } }
  let targetNumber = null;
  function startGuessNumberGame() { targetNumber = Math.floor(Math.random() * 10) + 1; const tracker = document.getElementById('number-tracker'); tracker.innerHTML = ''; for (let i = 1; i <= 10; i++) { tracker.innerHTML += `<div class="tracker-num" data-num="${i}">${i}</div>`; } document.getElementById("gameMessage").textContent = ""; document.getElementById("guessInput").value = ""; }
  window.checkGuess = () => { const input = document.getElementById("guessInput"); const message = document.getElementById("gameMessage"); const val = parseInt(input.value); if (!val || val < 1 || val > 10) { message.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 1-10 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ô‡∏∞!"; return; } const guessedNumEl = document.querySelector(`.tracker-num[data-num="${val}"]`); if (val === targetNumber) { message.textContent = "üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î The Best ‡πÅ‡∏•‡πâ‡∏ß!"; if(guessedNumEl) guessedNumEl.classList.add('correct'); unlockCategory("best"); } else { message.textContent = "‡∏ú‡∏¥‡∏î‡∏ô‡∏∞ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á!"; if(guessedNumEl) guessedNumEl.classList.add('guessed'); input.classList.add("shake"); message.classList.add("flashRed"); setTimeout(() => { input.classList.remove("shake"); message.classList.remove("flashRed"); }, 700); } }
  function shuffle(array) { return array.sort(() => Math.random() - 0.5); } window.resetCardGame = () => { startCardGame(); }
  let heartIndex = null; let cardsPicked = false;
  function startCardGame() { const container = document.getElementById("cardContainer"); const message = document.getElementById("puzzleMessage"); const cards = container.querySelectorAll(".card"); const emojis = ["‚ô•Ô∏è", "üçÄ", "‚≠ê"]; let shuffled = shuffle([...emojis]); shuffled.forEach((emoji, i) => { const card = cards[i]; card.textContent = emoji; card.setAttribute("data-emoji", emoji); card.style.background = "#fff2f7"; card.style.color = "#5e2b45"; card.style.pointerEvents = "none"; card.classList.remove("shake"); }); heartIndex = shuffled.findIndex(e => e === "‚ô•Ô∏è"); cardsPicked = true; message.textContent = "‡∏à‡πâ‡∏≠‡∏á‡∏î‡∏µ‡πÜ ‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡πÑ‡∏û‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ö‡πÑ‡∏´‡∏ô~ üëÄ"; setTimeout(() => { animateSlowShuffle(cards, () => { cards.forEach(card => { card.textContent = "?"; card.style.pointerEvents = "auto"; }); cardsPicked = false; message.textContent = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏•‡∏¢~ üíò"; }); }, 2000); }
  window.pickCard = (i) => { if (cardsPicked) return; const container = document.getElementById("cardContainer"); const message = document.getElementById("puzzleMessage"); const cards = container.querySelectorAll(".card"); const card = cards[i]; const val = card.getAttribute("data-emoji"); cardsPicked = true; if (val === "‚ô•Ô∏è") { card.textContent = val; card.style.background = "#d43f6f"; card.style.color = "white"; message.textContent = "üéâ ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡πÄ‡∏à‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß~ ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î‡∏Æ‡∏≤‡πÄ‡∏•‡∏¢!"; unlockCategory("funny"); } else { card.textContent = val; card.style.background = "#ff8ab8"; card.classList.add("shake"); message.textContent = "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ô‡πâ‡∏≤~ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞ üí¶"; message.classList.add("flashRed"); setTimeout(() => message.classList.remove("flashRed"), 600); } cards.forEach((c, idx) => { const trueVal = c.getAttribute("data-emoji"); if (trueVal === "‚ô•Ô∏è") { c.textContent = trueVal; c.style.background = "#d43f6f"; c.style.color = "white"; } c.style.pointerEvents = "none"; }); }
  function animateSlowShuffle(cards, callback) { const swaps = [[0, 1], [1, 2], [0, 2]]; const steps = shuffle([...swaps, ...swaps]); let stepIndex = 0; function doSwap() { if (stepIndex >= steps.length) { callback(); return; } const [a, b] = steps[stepIndex]; swapCards(cards[a], cards[b]); stepIndex++; setTimeout(doSwap, 700); } doSwap(); }
  function swapCards(cardA, cardB) { const rectA = cardA.getBoundingClientRect(); const rectB = cardB.getBoundingClientRect(); const dx = rectB.left - rectA.left; const dy = rectB.top - rectA.top; cardA.style.transition = "transform 0.5s ease"; cardB.style.transition = "transform 0.5s ease"; cardA.style.transform = `translate(${dx}px, ${dy}px)`; cardB.style.transform = `translate(${-dx}px, ${-dy}px)`; setTimeout(() => { cardA.style.transition = ""; cardB.style.transition = ""; cardA.style.transform = ""; cardB.style.transform = ""; const tempEmoji = cardA.getAttribute("data-emoji"); cardA.setAttribute("data-emoji", cardB.getAttribute("data-emoji")); cardB.setAttribute("data-emoji", tempEmoji); const tempText = cardA.textContent; cardA.textContent = cardB.textContent; cardB.textContent = tempText; }, 500); }
  const gachaPool = [ { emoji: 'üå∏', stars: 1 }, { emoji: 'üçÄ', stars: 2 }, { emoji: '‚ù§Ô∏è', stars: 3 }, { emoji: '‚ú®', stars: 4 }, { emoji: 'üåü', stars: 5 } ];
  window.startGacha = () => { const display = document.getElementById("gacha-display"); const resultDiv = document.getElementById("gachaResult"); resultDiv.textContent = ""; display.textContent = "üé∞"; let spinCount = 0; const spinInterval = setInterval(() => { display.textContent = gachaPool[Math.floor(Math.random() * gachaPool.length)].emoji; spinCount++; if (spinCount >= 15) { clearInterval(spinInterval); const result = gachaPool[Math.floor(Math.random() * gachaPool.length)]; display.textContent = result.emoji; let starText = "‚≠ê".repeat(result.stars); resultDiv.textContent = `‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ '${result.emoji}' ‡∏£‡∏∞‡∏î‡∏±‡∏ö ${result.stars} ‡∏î‡∏≤‡∏ß! ${starText}`; if (result.stars === 5) { resultDiv.textContent += " üíñ ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏°‡∏ß‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏≠‡∏ö‡∏ñ‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß!"; unlockCategory("secret"); } } }, 120); }
  let hoopInterval = null; let shootGameScore = 0; let isShooting = false;
  function startShootHeartGame() { shootGameScore = 0; isShooting = false; const shootMessage = document.getElementById('shootMessage'); const heart = document.getElementById('heart'); heart.style.top = "220px"; shootMessage.textContent = `‡∏¢‡∏¥‡∏á‡πÉ‡∏´‡πâ‡∏•‡∏á 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á! (${shootGameScore}/5)`; let hoopDirection = 1; if (hoopInterval) clearInterval(hoopInterval); const hoop = document.getElementById("hoop"); hoop.style.left = "160px"; hoopInterval = setInterval(() => { let left = parseFloat(hoop.style.left); left += hoopDirection * 2; if (left > 220 || left < 100) hoopDirection *= -1; hoop.style.left = `${left}px`; }, 30); }
  function shootHeart(power) { if(isShooting) return; isShooting = true; let velocityY = -power; const heart = document.getElementById("heart"); const hoop = document.getElementById("hoop"); const shootMessage = document.getElementById("shootMessage"); let posY = parseFloat(heart.style.top); function animate() { posY += velocityY; velocityY += 0.3; heart.style.top = `${posY}px`; const heartBox = heart.getBoundingClientRect(); const hoopBox = hoop.getBoundingClientRect(); const heartCenterX = heartBox.left + heartBox.width / 2; const heartCenterY = heartBox.top + heartBox.height / 2; const isHorizontallyAligned = heartCenterX > hoopBox.left && heartCenterX < hoopBox.right; const isVerticallyAligned = heartCenterY > hoopBox.top && heartCenterY < hoopBox.bottom; if (isHorizontallyAligned && isVerticallyAligned && velocityY > 0) { shootGameScore++; shootMessage.textContent = `‚úÖ ‡∏•‡∏á‡∏´‡πà‡∏ß‡∏á‡πÅ‡∏•‡πâ‡∏ß! (${shootGameScore}/5)`; if (shootGameScore >= 5) { unlockCategory("love"); shootMessage.textContent += " ‚ù§Ô∏è ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!"; } resetHeart(); return; } if (posY > 300) { shootMessage.textContent = "‚ùå ‡∏û‡∏•‡∏≤‡∏î! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞"; resetHeart(); return; } requestAnimationFrame(animate); } requestAnimationFrame(animate); }
  function resetHeart() { setTimeout(() => { document.getElementById("heart").style.top = "220px"; isShooting = false; }, 500); }
  window.backToGameMenu = (currentGameId) => { if (currentGameId === "gameShootHearts" && hoopInterval) { clearInterval(hoopInterval); hoopInterval = null; } showPage("page7"); }
  document.querySelectorAll("#gameMenuGrid .menu-card").forEach(card => { card.onclick = () => { const game = card.dataset.game; if (game === "guessNumber") { showPage("gameGuessNumber"); startGuessNumberGame(); } else if (game === "cardShuffle") { showPage("gameCardShuffle"); resetCardGame(); } else if (game === "gachaPull") { showPage("gameGacha"); } else if (game === "shootHearts") { showPage("gameShootHearts"); startShootHeartGame(); } }; });
  
  function init() { 
    loadState(); 
    setupSlideshow(); 
    elements.lightboxOverlay.onclick = () => elements.lightboxOverlay.style.display = "none"; 
    
    // Start the real-time counter
    setInterval(updateAnniversaryCounter, 1000);
    updateAnniversaryCounter(); // Initial call

    let chargeStartTime = 0; 
    const shootBtn = document.getElementById('shootBtn'); 
    shootBtn.onmousedown = shootBtn.ontouchstart = (e) => { e.preventDefault(); if(isShooting) return; chargeStartTime = Date.now(); shootBtn.style.transform = 'scale(1.1)'; }; 
    shootBtn.onmouseup = shootBtn.ontouchend = (e) => { e.preventDefault(); if(chargeStartTime === 0) return; const holdTime = Date.now() - chargeStartTime; const power = Math.min(Math.max(holdTime / 80, 5), 12); shootHeart(power); chargeStartTime = 0; shootBtn.style.transform = 'scale(1)'; }; 
    showPage('page0'); 
  }
  
  init();
});
</script>
</body>
</html>


